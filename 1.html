<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>JobConnect | Career Platform</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        :root {
            --primary: #4F46E5;
            --secondary: #4338CA;
            --accent: #EC4899;
            --light: #F9FAFB;
            --dark: #111827;
            --gray: #6B7280;
            --success: #10B981;
            --warning: #F59E0B;
            --danger: #EF4444;
            --bg-gradient: linear-gradient(135deg, var(--primary), var(--secondary));
        }
        
        .dark-mode {
            --primary: #6366F1;
            --secondary: #4F46E5;
            --light: #1F2937;
            --dark: #F9FAFB;
            --gray: #9CA3AF;
            background-color: #111827;
            color: #F9FAFB;
        }

        .dark-mode .navbar-light {
            background-color: #1F2937 !important;
        }

        .dark-mode .card {
            background-color: #1F2937;
            border-color: #374151;
        }

        .dark-mode .table {
            color: #F9FAFB;
        }

        .dark-mode .dropdown-menu {
            background-color: #1F2937;
        }

        .dark-mode .dropdown-item {
            color: #F9FAFB;
        }

        .dark-mode .dropdown-item:hover {
            background-color: #374151;
        }

        .dark-mode-toggle {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: var(--primary);
            color: white;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            z-index: 1000;
        }

        body {
            font-family: 'Inter', system-ui, -apple-system, sans-serif;
            background-color: var(--light);
            color: var(--dark);
            line-height: 1.6;
            padding-top: 70px;
            transition: background-color 0.3s, color 0.3s;
            overflow-x: hidden;
        }
        
        .logo-icon {
            width: 42px;
            height: 42px;
            background: var(--bg-gradient);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 1.3rem;
            box-shadow: 0 4px 12px rgba(79, 70, 229, 0.3);
        }
        
        .logo-text {
            font-size: 1.8rem;
            font-weight: 800;
            background: linear-gradient(to right, var(--primary), var(--accent));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }
        
        .job-card, .course-card {
            transition: all 0.3s;
            border-left: 4px solid var(--primary);
        }
        
        .job-card:hover, .course-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 24px rgba(0,0,0,0.1);
        }
        
        .job-type {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
        }
        
        .full-time { background-color: rgba(16, 185, 129, 0.1); color: var(--success); }
        .part-time { background-color: rgba(79, 70, 229, 0.1); color: var(--primary); }
        .remote { background-color: rgba(236, 72, 153, 0.1); color: var(--accent); }
        
        .resume-preview {
            font-family: 'Times New Roman', Times, serif;
            font-size: 12pt;
            border: 1px solid #dee2e6;
            padding: 30px;
            height: 100%;
        }
        
        .resume-preview h1 {
            font-size: 16pt;
            border-bottom: 1px solid #000;
            padding-bottom: 5px;
            margin-bottom: 10px;
        }
        
        .resume-preview h2 {
            font-size: 14pt;
            margin: 15px 0 10px 0;
            border-bottom: 1px solid #ddd;
            padding-bottom: 3px;
        }
        
        .resume-preview h3 {
            font-size: 12pt;
            margin: 10px 0 5px 0;
            font-weight: bold;
        }
        
        .file-upload {
            border: 2px dashed #e9ecef;
            border-radius: 8px;
            padding: 40px;
            text-align: center;
            transition: all 0.3s;
        }
        
        .file-upload:hover {
            border-color: var(--primary);
            background-color: rgba(79, 70, 229, 0.05);
        }
        
        .ats-score {
            font-size: 24px;
            font-weight: bold;
            text-align: center;
            margin: 20px 0;
            padding: 15px;
            border-radius: 8px;
        }
        
        .score-high {
            background-color: rgba(16, 185, 129, 0.1);
            color: var(--success);
        }
        
        .score-medium {
            background-color: rgba(245, 158, 11, 0.1);
            color: var(--warning);
        }
        
        .score-low {
            background-color: rgba(239, 68, 68, 0.1);
            color: var(--danger);
        }
        
        .feedback-item {
            margin-bottom: 15px;
            padding-left: 20px;
            position: relative;
        }
        
        .feedback-item:before {
            content: "•";
            position: absolute;
            left: 5px;
        }
        
        .feedback-good {
            color: var(--success);
        }
        
        .feedback-bad {
            color: var(--danger);
        }
        
        .feedback-warning {
            color: var(--warning);
        }
        
        .keyword {
            padding: 5px 10px;
            border-radius: 4px;
            font-size: 14px;
        }
        
        .matched {
            background-color: rgba(16, 185, 129, 0.1);
            color: var(--success);
            border: 1px solid var(--success);
        }
        
        .missing {
            background-color: rgba(239, 68, 68, 0.1);
            color: var(--danger);
            border: 1px solid var(--danger);
        }
        
        .page-content {
            display: none;
        }
        
        .page-content.active {
            display: block;
        }

        .hero-section {
            position: relative;
            height: 80vh;
            min-height: 500px;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            text-align: center;
            margin-bottom: 50px;
        }
        
        .hero-content {
            position: relative;
            z-index: 3;
            max-width: 800px;
            padding: 40px;
            background-color: rgba(15, 23, 42, 0.7);
            border-radius: 16px;
            backdrop-filter: blur(4px);
            margin-top: 60px;
        }
        
        .hero-content h1 {
            font-size: clamp(2rem, 5vw, 3.5rem);
            font-weight: 800;
            margin-bottom: 1.5rem;
            line-height: 1.2;
        }
        
        .hero-content p {
            font-size: 1.25rem;
            margin-bottom: 2rem;
            opacity: 0.9;
        }
        
        .search-form {
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }

        :root {
            --primary: #4F46E5;
            --secondary: #4338CA;
            --accent: #EC4899;
            --light: #F9FAFB;
            --dark: #111827;
            --gray: #6B7280;
            --success: #10B981;
            --warning: #F59E0B;
            --danger: #EF4444;
            --bg-gradient: linear-gradient(135deg, var(--primary), var(--secondary));
        }
        
        .dark-mode {
            --primary: #6366F1;
            --secondary: #4F46E5;
            --light: #1F2937;
            --dark: #F9FAFB;
            --gray: #9CA3AF;
            background-color: #111827;
            color: #F9FAFB;
        }

        .dark-mode .navbar-light {
            background-color: #1F2937 !important;
        }

        .dark-mode .card {
            background-color: #1F2937;
            border-color: #374151;
        }

        .dark-mode .table {
            color: #F9FAFB;
        }

        .dark-mode .dropdown-menu {
            background-color: #1F2937;
        }

        .dark-mode .dropdown-item {
            color: #F9FAFB;
        }

        .dark-mode .dropdown-item:hover {
            background-color: #374151;
        }

        .dark-mode-toggle {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: var(--primary);
            color: white;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            z-index: 1000;
        }

        body {
            font-family: 'Inter', system-ui, -apple-system, sans-serif;
            background-color: var(--light);
            color: var(--dark);
            line-height: 1.6;
            padding-top: 70px;
            transition: background-color 0.3s, color 0.3s;
            overflow-x: hidden;
        }
        
        .logo-icon {
            width: 42px;
            height: 42px;
            background: var(--bg-gradient);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 1.3rem;
            box-shadow: 0 4px 12px rgba(79, 70, 229, 0.3);
        }
        
        .logo-text {
            font-size: 1.8rem;
            font-weight: 800;
            background: linear-gradient(to right, var(--primary), var(--accent));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }
        
        .job-card, .course-card {
            transition: all 0.3s;
            border-left: 4px solid var(--primary);
        }
        
        .job-card:hover, .course-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 24px rgba(0,0,0,0.1);
        }
        
        .job-type {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
        }
        
        .full-time { background-color: rgba(16, 185, 129, 0.1); color: var(--success); }
        .part-time { background-color: rgba(79, 70, 229, 0.1); color: var(--primary); }
        .remote { background-color: rgba(236, 72, 153, 0.1); color: var(--accent); }
        
        .resume-preview {
            font-family: 'Times New Roman', Times, serif;
            font-size: 12pt;
            border: 1px solid #dee2e6;
            padding: 30px;
            height: 100%;
        }
        
        .resume-preview h1 {
            font-size: 16pt;
            border-bottom: 1px solid #000;
            padding-bottom: 5px;
            margin-bottom: 10px;
        }
        
        .resume-preview h2 {
            font-size: 14pt;
            margin: 15px 0 10px 0;
            border-bottom: 1px solid #ddd;
            padding-bottom: 3px;
        }
        
        .resume-preview h3 {
            font-size: 12pt;
            margin: 10px 0 5px 0;
            font-weight: bold;
        }
        
        .file-upload {
            border: 2px dashed #e9ecef;
            border-radius: 8px;
            padding: 40px;
            text-align: center;
            transition: all 0.3s;
        }
        
        .file-upload:hover {
            border-color: var(--primary);
            background-color: rgba(79, 70, 229, 0.05);
        }
        
        .ats-score {
            font-size: 24px;
            font-weight: bold;
            text-align: center;
            margin: 20px 0;
            padding: 15px;
            border-radius: 8px;
        }
        
        .score-high {
            background-color: rgba(16, 185, 129, 0.1);
            color: var(--success);
        }
        
        .score-medium {
            background-color: rgba(245, 158, 11, 0.1);
            color: var(--warning);
        }
        
        .score-low {
            background-color: rgba(239, 68, 68, 0.1);
            color: var(--danger);
        }
        
        .feedback-item {
            margin-bottom: 15px;
            padding-left: 20px;
            position: relative;
        }
        
        .feedback-item:before {
            content: "•";
            position: absolute;
            left: 5px;
        }
        
        .feedback-good {
            color: var(--success);
        }
        
        .feedback-bad {
            color: var(--danger);
        }
        
        .feedback-warning {
            color: var(--warning);
        }
        
        .keyword {
            padding: 5px 10px;
            border-radius: 4px;
            font-size: 14px;
        }
        
        .matched {
            background-color: rgba(16, 185, 129, 0.1);
            color: var(--success);
            border: 1px solid var(--success);
        }
        
        .missing {
            background-color: rgba(239, 68, 68, 0.1);
            color: var(--danger);
            border: 1px solid var(--danger);
        }
        
        .page-content {
            display: none;
        }
        
        .page-content.active {
            display: block;
        }

        .hero-section {
            position: relative;
            height: 80vh;
            min-height: 500px;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            text-align: center;
            margin-bottom: 50px;
        }
        
        .hero-content {
            position: relative;
            z-index: 3;
            max-width: 800px;
            padding: 40px;
            background-color: rgba(15, 23, 42, 0.7);
            border-radius: 16px;
            backdrop-filter: blur(4px);
            margin-top: 60px;
        }
        
        .hero-content h1 {
            font-size: clamp(2rem, 5vw, 3.5rem);
            font-weight: 800;
            margin-bottom: 1.5rem;
            line-height: 1.2;
        }
        
        .hero-content p {
            font-size: 1.25rem;
            margin-bottom: 2rem;
            opacity: 0.9;
        }
        
        .search-form {
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }

        .hero-bg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            z-index: 0;
            will-change: transform;
        }

        .hero-logo {
            position: absolute;
            width: 120px;
                height: auto;
            z-index: 2;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            opacity: 0.9;
            filter: drop-shadow(0 2px 8px rgba(0, 0, 0, 0.2));
            transition: transform 0.3s ease-out;
            pointer-events: none;
        }

        .role-employer {
            display: none;
        }

        .role-jobseeker {
            display: none;
        }

        .employer-pending {
            background-color: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 10px;
            margin-bottom: 15px;
        }

        .employer-approved {
            background-color: #d4edda;
            border-left: 4px solid #28a745;
            padding: 10px;
            margin-bottom: 15px;
        }

        /* Add toast notification styles */
        .toast-container {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1050;
        }
        
        .toast {
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            padding: 16px;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            min-width: 300px;
            animation: slideIn 0.3s ease-out;
        }
        
        .toast-success {
            border-left: 4px solid var(--success);
        }
        
        .toast-error {
            border-left: 4px solid var(--danger);
        }

        .toast-info {
            border-left: 4px solid var(--primary);
        }

        .toast-icon {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 12px;
            font-size: 1rem;
        }
        
        .toast-success .toast-icon {
            background-color: rgba(16, 185, 129, 0.1);
            color: var(--success);
        }
        
        .toast-error .toast-icon {
            background-color: rgba(239, 68, 68, 0.1);
            color: var(--danger);
        }

        .toast-info .toast-icon {
            background-color: rgba(79, 70, 229, 0.1);
            color: var(--primary);
        }

        .toast-content {
            flex: 1;
        }
        
        .toast-title {
            font-weight: 600;
            margin-bottom: 4px;
        }
        
        .toast-message {
            color: var(--gray);
            font-size: 0.9rem;
        }
        
        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        @keyframes slideOut {
            from {
                transform: translateX(0);
                opacity: 1;
            }
            to {
                transform: translateX(100%);
                opacity: 0;
            }
        }
        
        .toast.hide {
            animation: slideOut 0.3s ease-in forwards;
        }
    </style>
</head>
<body class="light-mode">
    <!-- Dark Mode Toggle -->
    <div class="dark-mode-toggle">
        <i class="fas fa-moon"></i>
    </div>

    <!-- Header -->
    <header class="bg-white shadow-sm fixed-top">
        <div class="container">
            <nav class="navbar navbar-expand-lg navbar-light">
                <a href="#" class="navbar-brand d-flex align-items-center" onclick="showPage('home')">
                    <div class="logo-icon me-2">
                        <i class="fas fa-link"></i>
                    </div>
                    <span class="logo-text">JobConnect</span>
                </a>
                
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarContent">
                    <i class="fas fa-bars"></i>
                </button>
                
                <div class="collapse navbar-collapse" id="navbarContent">
                    <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                        <li class="nav-item">
                            <a class="nav-link active" href="#" onclick="showPage('home')"><i class="fas fa-home me-1"></i> Home</a>
                        </li>
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" id="jobsDropdown" role="button" data-bs-toggle="dropdown">
                                <i class="fas fa-search me-1"></i> Find Jobs
                            </a>
                            <ul class="dropdown-menu">
                                <li><a class="dropdown-item" href="#" onclick="showJobCategory('all')">All Jobs</a></li>
                                <li><a class="dropdown-item" href="#" onclick="showJobCategory('remote')">Remote Jobs</a></li>
                                <li><a class="dropdown-item" href="#" onclick="showJobCategory('full-time')">Full-time Jobs</a></li>
                                <li><a class="dropdown-item" href="#" onclick="showJobCategory('part-time')">Part-time Jobs</a></li>
                            </ul>
                        </li>
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" id="servicesDropdown" role="button" data-bs-toggle="dropdown">
                                <i class="fas fa-suitcase me-1"></i> Our Services
                            </a>
                            <ul class="dropdown-menu">
                                <li><a class="dropdown-item" href="#" onclick="showPage('resume-builder')"><i class="fas fa-file-alt me-2"></i>Build Resume</a></li>
                                <li><a class="dropdown-item" href="#" onclick="showPage('ats-checker')"><i class="fas fa-check-circle me-2"></i>Check ATS Score</a></li>
                                <!-- Job Seeker-only services -->
                                <li class="role-jobseeker"><a class="dropdown-item" href="#" onclick="showPage('saved-jobs')"><i class="fas fa-bookmark me-2"></i>Saved Jobs</a></li>
                                <li class="role-jobseeker"><a class="dropdown-item" href="#" onclick="showPage('my-applications')"><i class="fas fa-briefcase me-2"></i>Applied Jobs</a></li>
                                <!-- Employer-only services -->
                                <li class="role-employer"><a class="dropdown-item" href="#" onclick="showPage('employer-dashboard')"><i class="fas fa-tachometer-alt me-2"></i>Dashboard</a></li>
                                <li class="role-employer"><a class="dropdown-item" href="#" data-bs-toggle="modal" data-bs-target="#postJobModal"><i class="fas fa-plus me-2"></i>Post Job</a></li>
                            </ul>
                        </li>
                        <!-- Employer Dashboard Link -->
                        <li class="nav-item role-employer">
                            <a class="nav-link" href="#" onclick="showPage('employer-dashboard')">
                                <i class="fas fa-tachometer-alt me-1"></i> Dashboard
                            </a>
                        </li>
                    </ul>
                    
                    <div class="d-flex" id="authButtons">
                        <a href="#" class="btn btn-outline-primary me-2" onclick="showPage('login')"><i class="fas fa-sign-in-alt me-1"></i> Login</a>
                        <a href="#" class="btn btn-primary" onclick="showPage('register')"><i class="fas fa-user-plus me-1"></i> Register</a>
                    </div>
                    <div class="dropdown" id="userProfile" style="display:none;">
                        <button class="btn btn-outline-primary dropdown-toggle" type="button" id="profileDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                            <i class="fas fa-user-circle me-1"></i>
                            <span id="userProfileName">User</span>
                        </button>
                        <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="profileDropdown">
                            <li><a class="dropdown-item" href="#" onclick="showPage('profile')"><i class="fas fa-user me-2"></i>Profile</a></li>
                            <li class="role-jobseeker"><a class="dropdown-item" href="#" onclick="showPage('saved-jobs')"><i class="fas fa-bookmark me-2"></i>Saved Jobs</a></li>
                            <li class="role-jobseeker"><a class="dropdown-item" href="#" onclick="showPage('my-applications')"><i class="fas fa-briefcase me-2"></i>Applied Jobs</a></li>
                            <li class="role-employer"><a class="dropdown-item" href="#" onclick="showPage('employer-dashboard')"><i class="fas fa-tachometer-alt me-2"></i>Dashboard</a></li>
                            <li><hr class="dropdown-divider"></li>
                            <li><a class="dropdown-item" href="#" onclick="handleLogout()"><i class="fas fa-sign-out-alt me-2"></i>Logout</a></li>
                        </ul>
                    </div>
                </div>
            </nav>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container-fluid p-0">
        <!-- Home Page -->
        <div id="home-page" class="page-content active">
            <!-- Hero Section -->
            <section class="hero-section">
                <img src="https://images.unsplash.com/photo-1521791136064-7986c2920216?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2000&q=80" 
                     alt="Office workspace background" 
                     class="hero-bg" 
                     id="parallax-bg">
                
                <img src="https://via.placeholder.com/120x120?text=JobConnect" 
                     alt="JobConnect Logo" 
                     class="hero-logo"
                     id="parallax-logo">
                
                <div class="hero-content">
                    <h1>Find Your Dream Career Today</h1>
                    <p>Connecting talented professionals with top companies worldwide</p>
                    
                    <div class="search-form">
                        <form class="row g-3" id="jobSearchForm">
                            <div class="col-md-5">
                                <div class="input-group">
                                    <span class="input-group-text"><i class="fas fa-search"></i></span>
                                    <input type="text" class="form-control" id="jobSearchInput" placeholder="Job title, keywords, or company">
                                </div>
                            </div>
                            <div class="col-md-5">
                                <div class="input-group">
                                    <span class="input-group-text"><i class="fas fa-map-marker-alt"></i></span>
                                    <input type="text" class="form-control" id="locationInput" placeholder="Location">
                                </div>
                            </div>
                            <div class="col-md-2">
                                <button type="submit" class="btn btn-danger w-100"><i class="fas fa-search me-1"></i> Search</button>
                            </div>
                        </form>
                    </div>
                </div>
            </section>

            <div class="container">
                <!-- Job Listings -->
                <section class="mb-5">
                    <div class="d-flex justify-content-between align-items-center mb-4">
                        <h2 class="h3 fw-bold">Featured Job Opportunities in India</h2>
                        <a href="#" class="btn btn-link" onclick="filterJobs('all')">View all jobs <i class="fas fa-arrow-right ms-1"></i></a>
                    </div>
                    
                    <div class="row g-4" id="jobListings">
                        <div class="col-md-4">
                            <div class="card h-100 job-card">
                                <div class="card-body">
                                    <div class="d-flex justify-content-between align-items-start mb-3">
                                        <div>
                                            <h5 class="card-title">Senior Software Engineer</h5>
                                            <h6 class="card-subtitle mb-2 text-muted">Tech Mahindra</h6>
                                        </div>
                                        <span class="badge bg-primary job-type">Full-time</span>
                                    </div>
                                    <p class="card-text">Looking for experienced software engineers with expertise in Java, Spring Boot, and Microservices.</p>
                                    <div class="d-flex justify-content-between align-items-center">
                                        <span><i class="fas fa-map-marker-alt me-1"></i> Bangalore, India</span>
                                        <span><i class="fas fa-rupee-sign me-1"></i> 15-20 LPA</span>
                                    </div>
                                    <div class="mt-3">
                                        <button class="btn btn-sm btn-primary me-2" onclick="viewJobDetails('senior-software-engineer')">View Details</button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-4">
                            <div class="card h-100 job-card">
                                <div class="card-body">
                                    <div class="d-flex justify-content-between align-items-start mb-3">
                                        <div>
                                            <h5 class="card-title">Data Scientist</h5>
                                            <h6 class="card-subtitle mb-2 text-muted">Tata Consultancy Services</h6>
                                        </div>
                                        <span class="badge bg-success job-type">Remote</span>
                                    </div>
                                    <p class="card-text">Seeking data scientists with experience in Python, Machine Learning, and Big Data technologies.</p>
                                    <div class="d-flex justify-content-between align-items-center">
                                        <span><i class="fas fa-map-marker-alt me-1"></i> Mumbai, India</span>
                                        <span><i class="fas fa-rupee-sign me-1"></i> 12-18 LPA</span>
                                    </div>
                                    <div class="mt-3">
                                        <button class="btn btn-sm btn-primary me-2" onclick="viewJobDetails('data-scientist')">View Details</button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-4">
                            <div class="card h-100 job-card">
                                <div class="card-body">
                                    <div class="d-flex justify-content-between align-items-start mb-3">
                                        <div>
                                            <h5 class="card-title">UI/UX Designer</h5>
                                            <h6 class="card-subtitle mb-2 text-muted">Infosys</h6>
                                        </div>
                                        <span class="badge bg-info job-type">Part-time</span>
                                    </div>
                                    <p class="card-text">Looking for creative UI/UX designers with experience in Figma and Adobe XD.</p>
                                    <div class="d-flex justify-content-between align-items-center">
                                        <span><i class="fas fa-map-marker-alt me-1"></i> Hyderabad, India</span>
                                        <span><i class="fas fa-rupee-sign me-1"></i> 8-12 LPA</span>
                                    </div>
                                    <div class="mt-3">
                                        <button class="btn btn-sm btn-primary me-2" onclick="viewJobDetails('ui-ux-designer')">View Details</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Popular Courses -->
                <section class="mb-5">
                    <div class="d-flex justify-content-between align-items-center mb-4">
                        <h2 class="h3 fw-bold">Popular Career Courses in India</h2>
                        <a href="#" class="btn btn-link" onclick="filterCourses('all')">Browse all courses <i class="fas fa-arrow-right ms-1"></i></a>
                    </div>
                    
                    <div class="row g-4" id="courseListings">
                        <div class="col-md-4">
                            <div class="card h-100 course-card">
                                <img src="https://images.unsplash.com/photo-1555066931-4365d14bab8c?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=600&q=80" class="card-img-top" alt="Web Development">
                                <div class="card-body">
                                    <span class="badge bg-primary bg-opacity-10 text-primary mb-2">Technology</span>
                                    <h5 class="card-title">Full Stack Web Development</h5>
                                    <p class="card-text">Master HTML, CSS, JavaScript, Node.js and React in this comprehensive bootcamp.</p>
                                    <div class="mt-3">
                                        <a href="https://www.udemy.com/course/full-stack-web-development/" class="btn btn-primary w-100" target="_blank">Enroll Now</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-md-4">
                            <div class="card h-100 course-card">
                                <img src="https://images.unsplash.com/photo-1460925895917-afdab827c52f?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=600&q=80" class="card-img-top" alt="Digital Marketing">
                                <div class="card-body">
                                    <span class="badge bg-success bg-opacity-10 text-success mb-2">Business</span>
                                    <h5 class="card-title">Digital Marketing Certification</h5>
                                    <p class="card-text">Learn SEO, Social Media, PPC and Content Marketing strategies for Indian market.</p>
                                    <div class="mt-3">
                                        <a href="https://www.coursera.org/specializations/digital-marketing" class="btn btn-primary w-100" target="_blank">Enroll Now</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-md-4">
                            <div class="card h-100 course-card">
                                <img src="https://images.unsplash.com/photo-1629904853893-c2c8981a1dc5?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=600&q=80" class="card-img-top" alt="UI/UX Design">
                                <div class="card-body">
                                    <span class="badge bg-danger bg-opacity-10 text-danger mb-2">Design</span>
                                    <h5 class="card-title">UI/UX Design Masterclass</h5>
                                    <p class="card-text">Learn user-centered design principles and industry tools like Figma.</p>
                                    <div class="mt-3">
                                        <a href="https://www.udemy.com/course/ui-ux-web-design-using-adobe-xd/" class="btn btn-primary w-100" target="_blank">Enroll Now</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- In-Demand Skills -->
                <section class="mb-5">
                    <h2 class="h3 fw-bold text-center mb-4">Top In-Demand Skills</h2>
                    <p class="text-center text-muted mb-5">Develop these high-value skills to boost your employability across industries</p>
                    
                    <div class="card shadow-sm">
                        <div class="card-body">
                            <div class="row g-4">
                                <div class="col-md-4">
                                    <h4 class="h5 mb-4"><i class="fas fa-laptop-code text-primary me-2"></i> Technical Skills</h4>
                                    <ul class="list-group list-group-flush">
                                        <li class="list-group-item d-flex justify-content-between align-items-center">
                                            Python <span class="badge bg-success bg-opacity-10 text-success">High</span>
                                        </li>
                                        <li class="list-group-item d-flex justify-content-between align-items-center">
                                            JavaScript/React <span class="badge bg-success bg-opacity-10 text-success">High</span>
                                        </li>
                                        <li class="list-group-item d-flex justify-content-between align-items-center">
                                            Cloud Computing <span class="badge bg-warning bg-opacity-10 text-warning">Growing</span>
                                        </li>
                                        <li class="list-group-item d-flex justify-content-between align-items-center">
                                            Data Analysis <span class="badge bg-success bg-opacity-10 text-success">High</span>
                                        </li>
                                        <li class="list-group-item d-flex justify-content-between align-items-center">
                                            Cybersecurity <span class="badge bg-warning bg-opacity-10 text-warning">Growing</span>
                                        </li>
                                    </ul>
                                </div>
                                
                                <div class="col-md-4">
                                    <h4 class="h5 mb-4"><i class="fas fa-chart-line text-primary me-2"></i> Business Skills</h4>
                                    <ul class="list-group list-group-flush">
                                        <li class="list-group-item d-flex justify-content-between align-items-center">
                                            Project Management <span class="badge bg-success bg-opacity-10 text-success">High</span>
                                        </li>
                                        <li class="list-group-item d-flex justify-content-between align-items-center">
                                            Digital Marketing <span class="badge bg-success bg-opacity-10 text-success">High</span>
                                        </li>
                                        <li class="list-group-item d-flex justify-content-between align-items-center">
                                            Data-Driven Decision Making <span class="badge bg-warning bg-opacity-10 text-warning">Growing</span>
                                        </li>
                                        <li class="list-group-item d-flex justify-content-between align-items-center">
                                            Financial Literacy <span class="badge bg-secondary bg-opacity-10 text-secondary">Medium</span>
                                        </li>
                                        <li class="list-group-item d-flex justify-content-between align-items-center">
                                            Business Analytics <span class="badge bg-success bg-opacity-10 text-success">High</span>
                                        </li>
                                    </ul>
                                </div>
                                
                                <div class="col-md-4">
                                    <h4 class="h5 mb-4"><i class="fas fa-users text-primary me-2"></i> Soft Skills</h4>
                                    <ul class="list-group list-group-flush">
                                        <li class="list-group-item d-flex justify-content-between align-items-center">
                                            Communication <span class="badge bg-primary bg-opacity-10 text-primary">Essential</span>
                                        </li>
                                        <li class="list-group-item d-flex justify-content-between align-items-center">
                                            Problem Solving <span class="badge bg-primary bg-opacity-10 text-primary">Essential</span>
                                        </li>
                                        <li class="list-group-item d-flex justify-content-between align-items-center">
                                            Emotional Intelligence <span class="badge bg-success bg-opacity-10 text-success">High</span>
                                        </li>
                                        <li class="list-group-item d-flex justify-content-between align-items-center">
                                            Adaptability <span class="badge bg-success bg-opacity-10 text-success">High</span>
                                        </li>
                                        <li class="list-group-item d-flex justify-content-between align-items-center">
                                            Leadership <span class="badge bg-warning bg-opacity-10 text-warning">Growing</span>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </div>

        <!-- Resume Builder Page -->
        <div id="resume-builder-page" class="page-content">
            <div class="container">
                <div class="row justify-content-center">
                    <div class="col-lg-8">
                        <div class="card">
                            <div class="card-body text-center">
                                <h2 class="mb-4">Professional Resume Builder</h2>
                                <p class="lead mb-4">We recommend using Novoresume for creating professional resumes with free templates and downloads.</p>
                                <div class="mb-4">
                                    <img src="https://novoresume.com/images/logo.svg" alt="Novoresume Logo" class="img-fluid mb-3" style="max-width: 200px;">
                                    <p class="mb-4">Novoresume offers:</p>
                                    <ul class="list-unstyled">
                                        <li class="mb-2"><i class="fas fa-check text-success me-2"></i>Professional templates</li>
                                        <li class="mb-2"><i class="fas fa-check text-success me-2"></i>Free downloads</li>
                                        <li class="mb-2"><i class="fas fa-check text-success me-2"></i>ATS-friendly formats</li>
                                        <li class="mb-2"><i class="fas fa-check text-success me-2"></i>Easy-to-use interface</li>
                                        </ul>
                                    </div>
                                <a href="https://novoresume.com/resume-builder" class="btn btn-primary btn-lg" target="_blank">
                                    <i class="fas fa-external-link-alt me-1"></i>Create Your Resume
                                </a>
                                    </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ATS Checker Page -->
        <div id="ats-checker-page" class="page-content">
            <div class="container">
                <div class="row justify-content-center">
                    <div class="col-lg-8">
                        <div class="card">
                            <div class="card-body text-center">
                                <h2 class="mb-4">ATS Resume Checker</h2>
                                <p class="lead mb-4">We recommend using Jobscan for detailed ATS analysis and optimization tips.</p>
                                <div class="mb-4">
                                    <img src="https://www.jobscan.co/wp-content/uploads/2020/05/logo.svg" alt="Jobscan Logo" class="img-fluid mb-3" style="max-width: 200px;">
                                    <p class="mb-4">Jobscan provides:</p>
                                    <ul class="list-unstyled">
                                        <li class="mb-2"><i class="fas fa-check text-success me-2"></i>Free basic ATS checks</li>
                                        <li class="mb-2"><i class="fas fa-check text-success me-2"></i>Detailed analysis</li>
                                        <li class="mb-2"><i class="fas fa-check text-success me-2"></i>Keyword matching</li>
                                        <li class="mb-2"><i class="fas fa-check text-success me-2"></i>Optimization suggestions</li>
                                    </ul>
                                </div>
                                <a href="https://www.jobscan.co/resume-scanner" class="btn btn-primary btn-lg" target="_blank">
                                    <i class="fas fa-external-link-alt me-1"></i>Check Your Resume
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Employer Dashboard Page -->
        <div id="employer-dashboard-page" class="page-content">
            <div class="container">
                <div class="d-flex justify-content-between align-items-center mb-4">
                    <h2 class="h3 fw-bold">Employer Dashboard</h2>
                    <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#postJobModal">
                        <i class="fas fa-plus me-1"></i> Post New Job
                    </button>
                </div>
                
                <!-- Employer Approval Status -->
                <div id="employerApprovalStatus" class="employer-pending">
                    <i class="fas fa-info-circle me-2"></i>
                    <strong>Account Status:</strong> 
                    <span id="approvalStatusText">Pending Admin Approval</span>
                    <p class="mb-0 mt-2">Your employer account is under review. You'll receive an email notification once approved.</p>
                </div>
                
                <div class="row mt-4">
                    <div class="col-md-4 mb-4">
                        <div class="card bg-primary text-white h-100">
                            <div class="card-body">
                                <h6 class="card-title">Active Jobs</h6>
                                <h2 class="mb-0" id="activeJobsCount">0</h2>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4 mb-4">
                        <div class="card bg-success text-white h-100">
                            <div class="card-body">
                                <h6 class="card-title">Total Applicants</h6>
                                <h2 class="mb-0" id="totalApplicantsCount">0</h2>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4 mb-4">
                        <div class="card bg-info text-white h-100">
                            <div class="card-body">
                                <h6 class="card-title">Pending Approval</h6>
                                <h2 class="mb-0" id="pendingApprovalCount">0</h2>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="card mb-4">
                    <div class="card-header">
                        <h5 class="mb-0">Recent Job Posts</h5>
                    </div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table table-hover" id="employerJobsTable">
                                <thead>
                                    <tr>
                                        <th>Job Title</th>
                                        <th>Applications</th>
                                        <th>Status</th>
                                        <th>Posted</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- Jobs will be loaded here -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Employer Applicants Page -->
        <div id="employer-applicants-page" class="page-content">
            <div class="container">
                <div class="d-flex justify-content-between align-items-center mb-4">
                    <h2 class="h3 fw-bold">Job Applicants</h2>
                    <button class="btn btn-outline-secondary" onclick="showPage('employer-dashboard')">
                        <i class="fas fa-arrow-left me-1"></i> Back to Dashboard
                    </button>
                </div>
                
                <div class="card mb-4">
                    <div class="card-header">
                        <h5 class="mb-0" id="applicantsJobTitle">Job Title</h5>
                    </div>
                    <div class="card-body">
                        <div id="applicantsContainer">
                            <!-- Applicants will be loaded here -->
                            <div class="alert alert-info">
                                No applicants for this job yet.
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Employer Applicant Details Page -->
        <div id="employer-applicant-details-page" class="page-content">
            <div class="container">
                <div class="d-flex justify-content-between align-items-center mb-4">
                    <h2 class="h3 fw-bold">Applicant Details</h2>
                    <button class="btn btn-outline-secondary" onclick="showPage('employer-applicants')">
                        <i class="fas fa-arrow-left me-1"></i> Back to Applicants
                    </button>
                </div>
                
                <div class="row">
                    <div class="col-md-4 mb-4">
                        <div class="card">
                            <div class="card-body text-center">
                                <div class="mb-3">
                                    <div class="avatar-lg mx-auto mb-3">
                                        <div class="avatar-title bg-primary rounded-circle text-white" style="width: 80px; height: 80px; line-height: 80px; font-size: 2rem;">
                                            <i class="fas fa-user"></i>
                                        </div>
                                    </div>
                                    <h4 id="applicantName">John Doe</h4>
                                    <p class="text-muted" id="applicantTitle">Web Developer</p>
                                </div>
                                
                                <div class="d-flex justify-content-center mb-3">
                                    <button class="btn btn-outline-primary me-2" id="viewResumeBtn">
                                        <i class="fas fa-file-alt me-1"></i> View Resume
                                    </button>
                                    <button class="btn btn-outline-success" id="downloadResumeBtn">
                                        <i class="fas fa-download me-1"></i> Download
                                    </button>
                                </div>
                                
                                <div class="border-top pt-3">
                                    <h5 class="h6">Contact Information</h5>
                                    <ul class="list-unstyled">
                                        <li class="mb-1"><i class="fas fa-envelope me-2"></i> <span id="applicantEmail">john.doe@example.com</span></li>
                                        <li class="mb-1"><i class="fas fa-phone me-2"></i> <span id="applicantPhone">(123) 456-7890</span></li>
                                        <li><i class="fas fa-map-marker-alt me-2"></i> <span id="applicantLocation">New York, NY</span></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        
                        <div class="card mt-4">
                            <div class="card-body">
                                <h5 class="card-title">Application Status</h5>
                                <div class="mb-3">
                                    <select class="form-select" id="applicationStatusSelect">
                                        <option value="new">New</option>
                                        <option value="reviewed">Reviewed</option>
                                        <option value="interview">Interview</option>
                                        <option value="hired">Hired</option>
                                        <option value="rejected">Rejected</option>
                                    </select>
                                </div>
                                <button class="btn btn-primary w-100" id="updateStatusBtn">
                                    <i class="fas fa-save me-1"></i> Update Status
                                </button>
                                
                                <div class="mt-3">
                                    <label for="statusNotes" class="form-label">Notes</label>
                                    <textarea class="form-control" id="statusNotes" rows="3" placeholder="Add any notes about this applicant..."></textarea>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-md-8">
                        <div class="card mb-4">
                            <div class="card-body">
                                <h5 class="card-title">Cover Letter</h5>
                                <div id="applicantCoverLetter">
                                    <p>Dear Hiring Manager,</p>
                                    <p>I am excited to apply for the Web Developer position at your company. With 5 years of experience in front-end development and a passion for creating responsive, user-friendly websites, I believe I would be a great fit for your team.</p>
                                    <p>In my current role at XYZ Corp, I've led several projects that resulted in 30% improvement in page load times and 25% increase in user engagement. I'm particularly drawn to your company's focus on innovative solutions and would love the opportunity to contribute my skills.</p>
                                    <p>I've attached my resume for your review and would welcome the chance to discuss how my experience aligns with your needs. Thank you for your consideration.</p>
                                    <p>Sincerely,</p>
                                    <p>John Doe</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="card mb-4">
                            <div class="card-body">
                                <h5 class="card-title">Application Timeline</h5>
                                <div class="timeline">
                                    <div class="timeline-item active">
                                        <div class="timeline-point"></div>
                                        <div class="timeline-content">
                                            <strong>Application Submitted</strong>
                                            <p class="mb-0 text-muted small">June 15, 2023 - 10:30 AM</p>
                                        </div>
                                    </div>
                                    <div class="timeline-item">
                                        <div class="timeline-point"></div>
                                        <div class="timeline-content">
                                            <strong>Resume Reviewed</strong>
                                            <p class="mb-0 text-muted small">June 16, 2023 - 2:15 PM</p>
                                        </div>
                                    </div>
                                    <div class="timeline-item">
                                        <div class="timeline-point"></div>
                                        <div class="timeline-content">
                                            <strong>Initial Screening</strong>
                                            <p class="mb-0 text-muted small">Pending</p>
                                        </div>
                                    </div>
                                    <div class="timeline-item">
                                        <div class="timeline-point"></div>
                                        <div class="timeline-content">
                                            <strong>Technical Interview</strong>
                                            <p class="mb-0 text-muted small">Pending</p>
                                        </div>
                                    </div>
                                    <div class="timeline-item">
                                        <div class="timeline-point"></div>
                                        <div class="timeline-content">
                                            <strong>Final Decision</strong>
                                            <p class="mb-0 text-muted small">Pending</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="card">
                            <div class="card-body">
                                <h5 class="card-title">Evaluation</h5>
                                <div class="mb-3">
                                    <label for="evaluationNotes" class="form-label">Evaluation Notes</label>
                                    <textarea class="form-control" id="evaluationNotes" rows="4" placeholder="Add your evaluation notes here..."></textarea>
                                </div>
                                
                                <div class="mt-3 d-flex justify-content-end">
                                    <button class="btn btn-primary">
                                        <i class="fas fa-save me-1"></i> Save Evaluation
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- My Applications Page -->
        <div id="my-applications-page" class="page-content">
            <div class="container">
                <div class="d-flex justify-content-between align-items-center mb-4">
                    <h2 class="h3 fw-bold">My Job Applications</h2>
                    <button class="btn btn-outline-primary" onclick="showPage('home')">
                        <i class="fas fa-search me-1"></i> Find More Jobs
                    </button>
                </div>
                
                <div class="card mb-4">
                    <div class="card-header">
                        <ul class="nav nav-tabs card-header-tabs">
                            <li class="nav-item">
                                <a class="nav-link active" href="#" id="allApplicationsTab">All Applications</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#" id="activeApplicationsTab">Active</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#" id="hiredApplicationsTab">Hired</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#" id="rejectedApplicationsTab">Rejected</a>
                            </li>
                        </ul>
                    </div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table table-hover" id="applicationsTable">
                                <thead>
                                    <tr>
                                        <th>Job Title</th>
                                        <th>Company</th>
                                        <th>Status</th>
                                        <th>Applied Date</th>
                                        <th>Last Update</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- Applications will be loaded here -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Saved Jobs Page -->
        <div id="saved-jobs-page" class="page-content">
            <div class="container">
                <div class="d-flex justify-content-between align-items-center mb-4">
                    <h2 class="h3 fw-bold">Saved Jobs</h2>
                    <button class="btn btn-outline-primary" onclick="showPage('home')">
                        <i class="fas fa-search me-1"></i> Find More Jobs
                    </button>
                </div>
                
                <div class="row" id="savedJobsContainer">
                    <div class="col-md-6 mb-4">
                        <div class="card h-100">
                            <div class="card-body">
                                <div class="d-flex justify-content-between">
                                    <h5 class="card-title">Senior Web Developer</h5>
                                    <button class="btn btn-sm btn-outline-danger">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                                <h6 class="card-subtitle mb-2 text-muted">Tech Solutions Inc.</h6>
                                <p class="card-text">We're looking for an experienced web developer to join our growing team...</p>
                                <div class="d-flex justify-content-between align-items-center">
                                    <span class="badge bg-primary">Full-time</span>
                                    <small class="text-muted">Saved 3 days ago</small>
                                </div>
                            </div>
                            <div class="card-footer bg-transparent">
                                <button class="btn btn-sm btn-primary me-2">Apply Now</button>
                                <button class="btn btn-sm btn-outline-secondary">View Details</button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-md-6 mb-4">
                        <div class="card h-100">
                            <div class="card-body">
                                <div class="d-flex justify-content-between">
                                    <h5 class="card-title">UI/UX Designer</h5>
                                    <button class="btn btn-sm btn-outline-danger">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                                <h6 class="card-subtitle mb-2 text-muted">Creative Digital Agency</h6>
                                <p class="card-text">Join our design team to create beautiful, user-centered digital experiences...</p>
                                <div class="d-flex justify-content-between align-items-center">
                                    <span class="badge bg-success">Remote</span>
                                    <small class="text-muted">Saved 1 week ago</small>
                                </div>
                            </div>
                            <div class="card-footer bg-transparent">
                                <button class="btn btn-sm btn-primary me-2">Apply Now</button>
                                <button class="btn btn-sm btn-outline-secondary">View Details</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Login Page -->
        <div id="login-page" class="page-content">
            <div class="container">
                <div class="row justify-content-center">
                    <div class="col-md-8 col-lg-6">
                        <div class="card shadow-lg">
                            <div class="card-body p-5">
                                <div class="text-center mb-5">
                                    <div class="logo-icon mx-auto mb-3">
                                        <i class="fas fa-link"></i>
                                    </div>
                                    <h2>Welcome Back to JobConnect</h2>
                                    <p class="text-muted">Sign in to access your account</p>
                                </div>
                                
                                <form id="loginForm" onsubmit="handleLogin(event)">
                                    <div class="mb-4">
                                        <label for="loginEmail" class="form-label">Email Address</label>
                                        <input type="email" class="form-control" id="loginEmail" name="email" placeholder="Enter your email" required>
                                    </div>
                                    
                                    <div class="mb-4">
                                        <label for="loginPassword" class="form-label">Password</label>
                                        <input type="password" class="form-control" id="loginPassword" name="password" placeholder="Enter your password" required>
                                        <div class="form-text text-end">
                                            <a href="#" id="forgotPasswordLink">Forgot password?</a>
                                        </div>
                                    </div>
                                    
                                    <div class="mb-4 form-check">
                                        <input type="checkbox" class="form-check-input" id="rememberMe">
                                        <label class="form-check-label" for="rememberMe">Remember me</label>
                                    </div>
                                    
                                    <div class="d-grid gap-2">
                                        <button type="submit" class="btn btn-primary">
                                            <i class="fas fa-sign-in-alt me-1"></i> Sign In
                                        </button>
                                        <button type="button" class="btn btn-outline-primary" onclick="demoLogin('jobseeker')">
                                            <i class="fas fa-user me-1"></i> Demo as Job Seeker
                                        </button>
                                        <button type="button" class="btn btn-outline-secondary" onclick="demoLogin('employer')">
                                            <i class="fas fa-briefcase me-1"></i> Demo as Employer
                                        </button>
                                    </div>
                                    
                                    <div class="text-center mt-3">
                                        <p class="mb-0">Don't have an account? <a href="#" onclick="showPage('register')">Sign up</a></p>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Register Page -->
        <div id="register-page" class="page-content">
            <div class="container">
                <div class="row justify-content-center">
                    <div class="col-md-8 col-lg-6">
                        <div class="card shadow-lg">
                            <div class="card-body p-5">
                                <div class="text-center mb-5">
                                    <div class="logo-icon mx-auto mb-3">
                                        <i class="fas fa-link"></i>
                                    </div>
                                    <h2>Join JobConnect Today</h2>
                                    <p class="text-muted">Create your account to get started</p>
                                </div>
                                
                                <form id="registerForm" method="post" action="register.php">
                                    <div class="row">
                                        <div class="col-md-6 mb-4">
                                            <label for="registerFirstName" class="form-label">First Name *</label>
                                            <input type="text" class="form-control" id="registerFirstName" name="firstName" placeholder="First name" required>
                                        </div>
                                        <div class="col-md-6 mb-4">
                                            <label for="registerLastName" class="form-label">Last Name *</label>
                                            <input type="text" class="form-control" id="registerLastName" name="lastName" placeholder="Last name" required>
                                        </div>
                                    </div>
                                    
                                    <div class="mb-4">
                                        <label for="registerEmail" class="form-label">Email Address *</label>
                                        <input type="email" class="form-control" id="registerEmail" name="email" placeholder="Enter your email" required>
                                    </div>
                                    
                                    <div class="mb-4">
                                        <label for="registerPhone" class="form-label">Phone Number *</label>
                                        <input type="tel" class="form-control" id="registerPhone" name="phone" placeholder="Enter your phone number" required>
                                    </div>

                                    <div class="mb-4">
                                        <label for="registerLocation" class="form-label">Location (City, Country) *</label>
                                        <input type="text" class="form-control" id="registerLocation" name="location" placeholder="Enter your location" required>
                                    </div>

                                    <div class="mb-4">
                                        <label for="registerExperience" class="form-label">Years of Experience</label>
                                        <input type="number" class="form-control" id="registerExperience" name="experience" placeholder="Enter years of experience">
                                    </div>

                                    <div class="mb-4">
                                        <label for="registerSkills" class="form-label">Skills (comma separated) *</label>
                                        <input type="text" class="form-control" id="registerSkills" name="skills" placeholder="e.g., JavaScript, Python, React" required>
                                    </div>

                                    <div class="mb-4">
                                        <label for="registerEducation" class="form-label">Highest Education *</label>
                                        <input type="text" class="form-control" id="registerEducation" name="education" placeholder="e.g., Bachelor's in Computer Science" required>
                                    </div>
                                    
                                    <div class="mb-4">
                                        <label for="registerPassword" class="form-label">Password *</label>
                                        <input type="password" class="form-control" id="registerPassword" name="password" placeholder="Create a password" required>
                                    </div>
                                    
                                    <div class="mb-4">
                                        <label for="registerConfirmPassword" class="form-label">Confirm Password *</label>
                                        <input type="password" class="form-control" id="registerConfirmPassword" name="confirmPassword" required>
                                    </div>
                                    
                                    <div class="mb-4">
                                        <label class="form-label">Account Type</label>
                                        <div class="d-flex gap-3">
                                            <div class="form-check flex-grow-1">
                                                <input class="form-check-input" type="radio" name="accountType" id="jobSeekerAccount" value="jobseeker" checked>
                                                <label class="form-check-label" for="jobSeekerAccount">
                                                    <i class="fas fa-user-tie me-1"></i> Job Seeker
                                                </label>
                                            </div>
                                            <div class="form-check flex-grow-1">
                                                <input class="form-check-input" type="radio" name="accountType" id="employerAccount" value="employer">
                                                <label class="form-check-label" for="employerAccount">
                                                    <i class="fas fa-briefcase me-1"></i> Employer
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="mb-4 form-check">
                                        <input type="checkbox" class="form-check-input" id="acceptTerms" required>
                                        <label class="form-check-label" for="acceptTerms">I agree to the <a href="#">Terms of Service</a> and <a href="#">Privacy Policy</a></label>
                                    </div>
                                    
                                    <button type="submit" class="btn btn-primary w-100 mb-3">
                                        <i class="fas fa-user-plus me-1"></i> Create Account
                                    </button>
                                    
                                    <div class="text-center">
                                        <p class="mb-0">Already have an account? <a href="#" onclick="showPage('login')">Sign in</a></p>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Forgot Password Page -->
        <div id="forgot-password-page" class="page-content">
            <div class="container">
                <div class="row justify-content-center">
                    <div class="col-md-8 col-lg-6">
                        <div class="card shadow-lg">
                            <div class="card-body p-5">
                                <div class="text-center mb-5">
                                    <div class="logo-icon mx-auto mb-3">
                                        <i class="fas fa-link"></i>
                                    </div>
                                    <h2>Reset Your Password</h2>
                                    <p class="text-muted">Enter your email to receive a password reset link</p>
                                </div>
                                
                                <form id="forgotPasswordForm">
                                    <div class="mb-4">
                                        <label for="forgotPasswordEmail" class="form-label">Email Address</label>
                                        <input type="email" class="form-control" id="forgotPasswordEmail" placeholder="Enter your email" required>
                                    </div>
                                    
                                    <button type="submit" class="btn btn-primary w-100 mb-3">
                                        <i class="fas fa-paper-plane me-1"></i> Send Reset Link
                                    </button>
                                    
                                    <div class="text-center">
                                        <p class="mb-0">Remember your password? <a href="#" onclick="showPage('login')">Sign in</a></p>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Job Categories Section -->
        <div id="job-categories-page" class="page-content">
            <div class="container">
                <h2 class="h3 fw-bold mb-4">Browse Jobs by Category</h2>
                <div class="row g-4" id="categoryJobListings">
                    <!-- Jobs will be loaded here based on category -->
                </div>
            </div>
        </div>

        <!-- Saved Jobs Page -->
        <div id="saved-jobs-page" class="page-content">
            <div class="container">
                <h2 class="h3 fw-bold mb-4">Saved Jobs</h2>
                <div class="row g-4" id="savedJobsContainer">
                    <!-- Saved jobs will be loaded here -->
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-dark text-white py-5">
        <div class="container">
            <div class="row">
                <div class="col-lg-4 mb-4">
                    <div class="d-flex align-items-center mb-3">
                        <div class="logo-icon me-2">
                            <i class="fas fa-link"></i>
                        </div>
                        <span class="logo-text text-white">JobConnect</span>
                    </div>
                    <p>Connecting talented professionals with top companies worldwide. Our mission is to make the job search process easier and more efficient for everyone.</p>
                    <div class="social-icons">
                        <a href="#" class="text-white me-3"><i class="fab fa-facebook-f"></i></a>
                        <a href="#" class="text-white me-3"><i class="fab fa-twitter"></i></a>
                        <a href="#" class="text-white me-3"><i class="fab fa-linkedin-in"></i></a>
                        <a href="#" class="text-white"><i class="fab fa-instagram"></i></a>
                    </div>
                </div>
                
                <div class="col-lg-2 col-md-6 mb-4">
                    <h5 class="h6 mb-3">For Job Seekers</h5>
                    <ul class="list-unstyled">
                        <li class="mb-2"><a href="#" class="text-white-50">Browse Jobs</a></li>
                        <li class="mb-2"><a href="#" class="text-white-50">Resume Builder</a></li>
                        <li class="mb-2"><a href="#" class="text-white-50">Career Advice</a></li>
                        <li class="mb-2"><a href="#" class="text-white-50">Job Search Tips</a></li>
                        <li><a href="#" class="text-white-50">Salary Calculator</a></li>
                    </ul>
                </div>
                
                <div class="col-lg-2 col-md-6 mb-4">
                    <h5 class="h6 mb-3">For Employers</h5>
                    <ul class="list-unstyled">
                        <li class="mb-2"><a href="#" class="text-white-50">Post a Job</a></li>
                        <li class="mb-2"><a href="#" class="text-white-50">Browse Candidates</a></li>
                        <li class="mb-2"><a href="#" class="text-white-50">Recruiting Solutions</a></li>
                        <li class="mb-2"><a href="#" class="text-white-50">HR Resources</a></li>
                        <li><a href="#" class="text-white-50">Pricing Plans</a></li>
                    </ul>
                </div>
                
                <div class="col-lg-4 mb-4">
                    <h5 class="h6 mb-3">Stay Updated</h5>
                    <p>Subscribe to our newsletter for the latest job postings and career tips.</p>
                    <form class="mb-3">
                        <div class="input-group">
                            <input type="email" class="form-control" placeholder="Your email">
                            <button class="btn btn-primary" type="button">Subscribe</button>
                        </div>
                    </form>
                    <p class="small text-white-50">
                        <i class="fas fa-phone-alt me-2"></i> +1 (555) 123-4567<br>
                        <i class="fas fa-envelope me-2"></i> support@jobconnect.com
                    </p>
                </div>
            </div>
            
            <hr class="my-4 bg-secondary">
            
            <div class="row">
                <div class="col-md-6 text-center text-md-start">
                    <p class="small mb-0">&copy; 2023 JobConnect. All rights reserved.</p>
                </div>
                <div class="col-md-6 text-center text-md-end">
                    <ul class="list-inline small mb-0">
                        <li class="list-inline-item"><a href="#" class="text-white-50">Privacy Policy</a></li>
                        <li class="list-inline-item"><a href="#" class="text-white-50">Terms of Service</a></li>
                        <li class="list-inline-item"><a href="#" class="text-white-50">Cookie Policy</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </footer>

    <!-- Post Job Modal -->
    <div class="modal fade" id="postJobModal" tabindex="-1" aria-labelledby="postJobModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="postJobModalLabel">Post a New Job</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="postJobForm">
                        <div class="mb-3">
                            <label for="jobTitle" class="form-label">Job Title *</label>
                            <input type="text" class="form-control" id="jobTitle" placeholder="e.g. Senior Web Developer" required>
                        </div>
                        
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="jobType" class="form-label">Job Type *</label>
                                <select class="form-select" id="jobType" required>
                                    <option value="">Select job type</option>
                                    <option value="full-time">Full-time</option>
                                    <option value="part-time">Part-time</option>
                                    <option value="contract">Contract</option>
                                    <option value="internship">Internship</option>
                                    <option value="remote">Remote</option>
                                </select>
                            </div>
                            <div class="col-md-6">
                                <label for="jobCategory" class="form-label">Category *</label>
                                <select class="form-select" id="jobCategory" required>
                                    <option value="">Select category</option>
                                    <option value="technology">Technology</option>
                                    <option value="business">Business</option>
                                    <option value="design">Design</option>
                                    <option value="marketing">Marketing</option>
                                    <option value="healthcare">Healthcare</option>
                                    <option value="education">Education</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="jobLocation" class="form-label">Location *</label>
                                <input type="text" class="form-control" id="jobLocation" placeholder="e.g. New York, NY" required>
                            </div>
                            <div class="col-md-6">
                                <label for="jobSalary" class="form-label">Salary Range</label>
                                <input type="text" class="form-control" id="jobSalary" placeholder="e.g. $80,000 - $100,000 per year">
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <label for="jobDescription" class="form-label">Job Description *</label>
                            <textarea class="form-control" id="jobDescription" rows="5" placeholder="Detailed job description, responsibilities, and requirements..." required></textarea>
                        </div>
                        
                        <div class="mb-3">
                            <label for="jobRequirements" class="form-label">Requirements *</label>
                            <textarea class="form-control" id="jobRequirements" rows="3" placeholder="Required skills, qualifications, and experience..." required></textarea>
                        </div>
                        
                        <div class="mb-3">
                            <label for="jobBenefits" class="form-label">Benefits</label>
                            <textarea class="form-control" id="jobBenefits" rows="3" placeholder="What you offer (health insurance, flexible hours, etc.)"></textarea>
                        </div>
                        
                        <div class="mb-3">
                            <label for="applicationDeadline" class="form-label">Application Deadline</label>
                            <input type="date" class="form-control" id="applicationDeadline">
                        </div>
                        
                        <div class="mb-3">
                            <label for="howToApply" class="form-label">How to Apply</label>
                            <textarea class="form-control" id="howToApply" rows="2" placeholder="Application instructions or link to application form"></textarea>
                        </div>
                        
                        <div class="form-check mb-4">
                            <input class="form-check-input" type="checkbox" id="featuredJob">
                            <label class="form-check-label" for="featuredJob">
                                Feature this job (additional fee applies)
                            </label>
                        </div>
                        
                        <div class="d-grid gap-2">
                            <button type="submit" class="btn btn-primary">
                                <i class="fas fa-paper-plane me-1"></i> Post Job
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- View Resume Modal -->
    <div class="modal fade" id="viewResumeModal" tabindex="-1" aria-labelledby="viewResumeModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-xl">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="viewResumeModalLabel">Resume Preview</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="resume-preview">
                        <!-- Resume content will be loaded here -->
                        <h1 id="resumeName">John Doe</h1>
                        <p id="resumeContact">john.doe@example.com | (123) 456-7890 | New York, NY | linkedin.com/in/johndoe</p>
                        
                        <h2>Professional Summary</h2>
                        <p id="resumeSummary">Experienced web developer with 5+ years of experience in front-end development. Specialized in creating responsive, user-friendly websites using modern JavaScript frameworks. Passionate about clean code and innovative solutions.</p>
                        
                        <h2>Skills</h2>
                        <div id="resumeSkills">
                            <p><strong>Technical:</strong> HTML5, CSS3, JavaScript (ES6+), React, Node.js, Express, MongoDB</p>
                            <p><strong>Tools:</strong> Git, Webpack, VS Code, Figma, Adobe Creative Suite</p>
                            <p><strong>Soft Skills:</strong> Team Collaboration, Problem Solving, Time Management</p>
                        </div>
                        
                        <h2>Professional Experience</h2>
                        <div id="resumeExperience">
                            <h3>Senior Web Developer | XYZ Corp, New York | 2019-Present</h3>
                            <ul>
                                <li>Lead a team of 5 developers to create responsive web applications</li>
                                <li>Improved page load times by 30% through performance optimization</li>
                                <li>Implemented new features using React and Redux</li>
                            </ul>
                            
                            <h3>Web Developer | ABC Solutions, Boston | 2016-2019</h3>
                            <ul>
                                <li>Developed and maintained client websites using modern frameworks</li>
                                <li>Collaborated with designers to implement UI/UX improvements</li>
                                <li>Reduced bug reports by 25% through improved testing</li>
                            </ul>
                        </div>
                        
                        <h2>Education</h2>
                        <div id="resumeEducation">
                            <h3>B.S. in Computer Science | University of Technology | 2012-2016</h3>
                            <p>Graduated with honors. Specialized in Web Development and Human-Computer Interaction.</p>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary">
                        <i class="fas fa-download me-1"></i> Download Resume
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Job Details Modal -->
    <div class="modal fade" id="jobDetailsModal" tabindex="-1" aria-labelledby="jobDetailsModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="jobDetailsModalLabel">Job Details</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="d-flex justify-content-between align-items-start mb-4">
                        <div>
                            <h3 id="modalJobTitle">Senior Web Developer</h3>
                            <h5 class="text-muted" id="modalJobCompany">Tech Solutions Inc.</h5>
                        </div>
                        <span class="badge bg-primary" id="modalJobType">Full-time</span>
                    </div>
                    
                    <div class="row mb-4">
                        <div class="col-md-6">
                            <p><i class="fas fa-map-marker-alt me-2"></i> <span id="modalJobLocation">New York, NY (Remote)</span></p>
                            <p><i class="fas fa-dollar-sign me-2"></i> <span id="modalJobSalary">$90,000 - $120,000 per year</span></p>
                        </div>
                        <div class="col-md-6">
                            <p><i class="fas fa-clock me-2"></i> <span id="modalJobPosted">Posted 3 days ago</span></p>
                            <p><i class="fas fa-calendar-alt me-2"></i> <span id="modalJobDeadline">Apply by June 30, 2023</span></p>
                        </div>
                    </div>
                    
                    <div class="mb-4">
                        <h5>Job Description</h5>
                        <div id="modalJobDescription">
                            <p>We are looking for an experienced Senior Web Developer to join our growing team. In this role, you will be responsible for leading the development of our web applications and ensuring high performance and responsiveness.</p>
                            <p><strong>Responsibilities:</strong></p>
                            <ul>
                                <li>Develop new user-facing features using React.js</li>
                                <li>Build reusable components and front-end libraries</li>
                                <li>Optimize applications for maximum speed and scalability</li>
                                <li>Collaborate with back-end developers and web designers</li>
                                <li>Implement automated testing and participate in code reviews</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="mb-4">
                        <h5>Requirements</h5>
                        <div id="modalJobRequirements">
                            <ul>
                                <li>5+ years of experience in web development</li>
                                <li>Strong proficiency in JavaScript, including DOM manipulation</li>
                                <li>Thorough understanding of React.js and its core principles</li>
                                <li>Experience with popular React workflows (such as Redux)</li>
                                <li>Familiarity with RESTful APIs and modern authorization mechanisms</li>
                                <li>Knowledge of modern front-end build pipelines and tools</li>
                                <li>Bachelor's degree in Computer Science or related field</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="mb-4">
                        <h5>Benefits</h5>
                        <div id="modalJobBenefits">
                            <ul>
                                <li>Competitive salary and equity options</li>
                                <li>Comprehensive health, dental, and vision insurance</li>
                                <li>401(k) with company matching</li>
                                <li>Flexible work hours and remote work options</li>
                                <li>Generous paid time off and parental leave</li>
                                <li>Professional development budget</li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" id="saveJobBtn">
                        <i class="far fa-bookmark me-1"></i> Save Job
                    </button>
                    <button type="button" class="btn btn-success" id="applyJobBtn">
                        <i class="fas fa-paper-plane me-1"></i> Apply Now
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Application Modal -->
    <div class="modal fade" id="applicationModal" tabindex="-1" aria-labelledby="applicationModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="applicationModalLabel">Apply for <span id="applicationJobTitle">Job Title</span></h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="jobApplicationForm">
                        <div class="mb-4">
                            <h6>Your Information</h6>
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label for="applicantFirstName" class="form-label">First Name *</label>
                                    <input type="text" class="form-control" id="applicantFirstName" required>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="applicantLastName" class="form-label">Last Name *</label>
                                    <input type="text" class="form-control" id="applicantLastName" required>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label for="applicantEmail" class="form-label">Email *</label>
                                    <input type="email" class="form-control" id="applicantEmail" required>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="applicantPhone" class="form-label">Phone *</label>
                                    <input type="tel" class="form-control" id="applicantPhone" required>
                                </div>
                            </div>
                            <div class="mb-3">
                                <label for="applicantLocation" class="form-label">Location (City, Country) *</label>
                                <input type="text" class="form-control" id="applicantLocation" required>
                            </div>
                        </div>
                        
                        <div class="mb-4">
                            <h6>Application Materials</h6>
                            <div class="mb-3">
                                <label for="resumeUpload" class="form-label">Upload Resume *</label>
                                <input type="file" class="form-control" id="resumeUpload" accept=".pdf,.doc,.docx" required>
                                <div class="form-text">PDF, DOC or DOCX (Max 5MB)</div>
                            </div>
                            <div class="mb-3">
                                <label for="coverLetterUpload" class="form-label">Upload Cover Letter (Optional)</label>
                                <input type="file" class="form-control" id="coverLetterUpload" accept=".pdf,.doc,.docx">
                                <div class="form-text">PDF, DOC or DOCX (Max 5MB)</div>
                            </div>
                            <div class="mb-3">
                                <label for="portfolioLink" class="form-label">Portfolio or LinkedIn URL (Optional)</label>
                                <input type="url" class="form-control" id="portfolioLink" placeholder="https://">
                            </div>
                        </div>
                        
                        <div class="mb-4">
                            <h6>Additional Information</h6>
                            <div class="mb-3">
                                <label for="coverLetterText" class="form-label">Cover Letter *</label>
                                <textarea class="form-control" id="coverLetterText" rows="5" required></textarea>
                            </div>
                            <div class="mb-3">
                                <label for="availability" class="form-label">Availability *</label>
                                <select class="form-select" id="availability" required>
                                    <option value="">Select your availability</option>
                                    <option value="immediate">Immediately</option>
                                    <option value="2weeks">Within 2 weeks</option>
                                    <option value="1month">Within 1 month</option>
                                    <option value="negotiable">Negotiable</option>
                                </select>
                            </div>
                            <div class="mb-3">
                                <label for="salaryExpectations" class="form-label">Salary Expectations *</label>
                                <input type="text" class="form-control" id="salaryExpectations" placeholder="e.g. $80,000 - $90,000" required>
                            </div>
                        </div>
                        
                        <div class="form-check mb-4">
                            <input class="form-check-input" type="checkbox" id="agreeTerms" required>
                            <label class="form-check-label" for="agreeTerms">
                                I confirm that the information provided is accurate and complete.
                            </label>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="submit" form="jobApplicationForm" class="btn btn-success">
                        <i class="fas fa-paper-plane me-1"></i> Submit Application
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Success Modal -->
    <div class="modal fade" id="successModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-body text-center p-5">
                    <div class="mb-4">
                        <div class="icon-lg rounded-circle bg-success bg-opacity-10 text-success mx-auto mb-3">
                            <i class="fas fa-check"></i>
                        </div>
                        <h4 id="successModalTitle">Success!</h4>
                        <p class="text-muted" id="successModalMessage">Your job application has been submitted successfully.</p>
                    </div>
                    <button type="button" class="btn btn-primary w-100" data-bs-dismiss="modal">Continue</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Error Modal -->
    <div class="modal fade" id="errorModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-body text-center p-5">
                    <div class="mb-4">
                        <div class="icon-lg rounded-circle bg-danger bg-opacity-10 text-danger mx-auto mb-3">
                            <i class="fas fa-times"></i>
                        </div>
                        <h4 id="errorModalTitle">Error!</h4>
                        <p class="text-muted" id="errorModalMessage">An error occurred while processing your request. Please try again.</p>
                    </div>
                    <button type="button" class="btn btn-primary w-100" data-bs-dismiss="modal">OK</button>
                </div>
            </div>
        </div>
    </div>

    <div class="toast-container"></div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="main.js"></script>
    <script>
        let currentUser = null;
        let userType = null;

        // --- Toast Notification Function ---
        function showToast(title, message, type = 'success') {
            const toastContainer = document.querySelector('.toast-container');
            if (!toastContainer) return; // Ensure container exists
            const toast = document.createElement('div');
            toast.className = `toast toast-${type}`;
            const iconClass = type === 'success' ? 'fa-check' : (type === 'error' ? 'fa-times' : 'fa-info-circle');
            toast.innerHTML = `
                <div class="toast-icon">
                    <i class="fas ${iconClass}"></i>
                </div>
                <div class="toast-content">
                    <div class="toast-title">${title}</div>
                    <div class="toast-message">${message}</div>
                </div>
            `;
            
            toastContainer.appendChild(toast);
            
            // Auto-remove toast
            setTimeout(() => {
                toast.classList.add('hide');
                setTimeout(() => toast.remove(), 300);
            }, 3000);
        }

        // --- Utility to get data from localStorage ---
        function getLocalStorage(key, defaultValue = []) {
            try {
                const item = localStorage.getItem(key);
                return item ? JSON.parse(item) : defaultValue;
            } catch (e) {
                console.error("Error reading localStorage key “" + key + "”:", e);
                return defaultValue;
            }
        }

        // --- User Session & UI Initialization ---
        function initializeRoleBasedUI() {
            const roleEmployerElements = document.querySelectorAll('.role-employer');
            const roleJobseekerElements = document.querySelectorAll('.role-jobseeker');
            
            // Default: hide all role-specific elements
            roleEmployerElements.forEach(el => el.style.display = 'none');
            roleJobseekerElements.forEach(el => el.style.display = 'none');
            
            // Show elements based on logged-in user type
            if (userType === 'employer') {
                roleEmployerElements.forEach(el => el.style.display = 'list-item'); // Use list-item for dropdowns, block for others if needed
            } else if (userType === 'jobseeker') {
                roleJobseekerElements.forEach(el => el.style.display = 'list-item');
            }
            // Adjust display property if 'list-item' isn't suitable for all contexts (e.g., nav items might need 'block' or 'flex')
            document.querySelectorAll('.nav-item.role-employer, .nav-item.role-jobseeker').forEach(el => {
                el.style.display = (el.classList.contains(`role-${userType}`) ? 'block' : 'none');
            });
        }

        // --- Page Navigation ---
        function showPage(pageId) {
            // Hide all pages
            document.querySelectorAll('.page-content').forEach(page => {
                page.classList.remove('active');
            });
            
            // Show the selected page
            const selectedPage = document.getElementById(pageId + '-page');
            if (selectedPage) {
                selectedPage.classList.add('active');
                
                // Update dynamic content when specific pages are shown
                if (pageId === 'saved-jobs') {
                    updateSavedJobsUI();
                }
                if (pageId === 'my-applications') {
                    // Ensure the table/tabs are handled correctly
                    handleApplicationTabs(); 
                }
                // Add similar checks for other dynamic pages if needed

            } else {
                // Fallback to home page if the target doesn't exist
                document.getElementById('home-page').classList.add('active');
                pageId = 'home';
            }

            // Update browser title
            document.title = pageId.charAt(0).toUpperCase() + pageId.slice(1).replace(/-/g, ' ') + " | JobConnect";
            
            // Update active nav link (simple version)
            document.querySelectorAll('.navbar-nav .nav-link').forEach(link => {
                link.classList.remove('active');
                // Basic check, might need refinement based on how pages are linked
                if(link.getAttribute('onclick')?.includes(`showPage('${pageId}')`)) {
                    link.classList.add('active');
                }
            });
            // Handle dropdown active states if needed

            // Close the navbar collapse on mobile after clicking a link
            const navbarCollapse = document.getElementById('navbarContent');
            if (navbarCollapse.classList.contains('show')) {
                const toggler = document.querySelector('.navbar-toggler');
                if (toggler) {
                    toggler.click();
                }
            }
        }

        // --- Authentication Functions ---
        function handleLogout() {
            currentUser = null;
            userType = null;
            localStorage.removeItem('currentUser');
            localStorage.removeItem('userType');

            // Update Navbar UI
            document.getElementById('authButtons').style.display = 'flex';
            document.getElementById('userProfile').style.display = 'none';
            document.getElementById('userProfileName').textContent = '';

            // Reset role-based UI
            document.querySelectorAll('.role-employer, .role-jobseeker').forEach(el => {
                el.style.display = 'none';
            });

            // Update UI elements that depend on login state
            updateAllJobCardButtons();
            updateSavedJobsUI();
            handleApplicationTabs();

            showToast('Logged Out', 'You have been successfully logged out.', 'success');
            showPage('home');
        }

        function handleLogout() {
    fetch('logout.php', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/x-www-form-urlencoded',
        },
        body: 'logout=true'
    })
    .then(response => {
        if (!response.ok) throw new Error('Logout failed');
        return response.json();
    })
    .then(data => {
        if (data.success) {
            // Clear all client-side storage
            localStorage.clear();
            sessionStorage.clear();
            
            // Force full page reload
            window.location.href = '1.html';
        } else {
            showToast('Error', data.message || 'Logout failed');
        }
    })
    .catch(error => {
        console.error('Logout error:', error);
        showToast('Error', 'Logout failed. Please try again.');
    });
}
        function handleRegister(event) {
            event.preventDefault();
            const form = event.target;
            const formData = new FormData(form);
            const password = formData.get('password');
            const confirmPassword = formData.get('confirmPassword');

            if (password !== confirmPassword) {
                showToast('Registration Error', 'Passwords do not match.', 'error');
                return;
            }
            
            if (!form.checkValidity()) {
                 showToast('Registration Error', 'Please fill all required fields correctly.', 'error');
                 form.reportValidity(); // Highlight invalid fields
                 return;
            }

            const userData = {
                firstName: formData.get('firstName'),
                lastName: formData.get('lastName'),
                email: formData.get('email'),
                phone: formData.get('phone'),
                location: formData.get('location'),
                experience: formData.get('experience'),
                skills: formData.get('skills')?.split(',').map(skill => skill.trim()) || [],
                education: formData.get('education'),
                password: password, // WARNING: Storing plain text password!
                type: formData.get('accountType'),
                createdAt: new Date().toISOString()
            };

            const users = getLocalStorage('users', []);
            if (users.some(u => u.email === userData.email)) {
                showToast('Registration Error', 'Email address is already registered.', 'error');
                return;
            }

            users.push(userData);
            try {
                localStorage.setItem('users', JSON.stringify(users));
            } catch (e) {
                 console.error("Error saving users to localStorage:", e);
                 showToast('Registration Error', 'Could not save user data. Storage might be full.', 'error');
                 return;
            }

            // Auto-login after registration
            currentUser = userData;
            userType = userData.type;
             try {
                localStorage.setItem('currentUser', JSON.stringify(currentUser));
             } catch(e) {
                  console.error("Error saving current user session:", e);
                  // Proceed without saving session if needed, but warn user
             }

            document.getElementById('userProfileName').textContent = userData.firstName;
            document.getElementById('authButtons').style.display = 'none';
            document.getElementById('userProfile').style.display = 'block';

            initializeRoleBasedUI();
            showToast('Registration Successful', `Welcome, ${userData.firstName}!`, 'success');
            
            // Update relevant UI sections
            updateAllJobCardButtons();
            updateSavedJobsUI();
            handleApplicationTabs();

            showPage('home'); // Navigate to home after registration
        }

        function handleForgotPassword(event) {
            event.preventDefault();
            const email = document.getElementById('forgotPasswordEmail').value;

            if (!email) {
                showToast('Input Error', 'Please enter your email address.', 'error');
                return;
            }

            // --- Placeholder for actual password reset logic --- 
            console.log(`Password reset requested for: ${email}`);
            // In a real app: Send request to backend to handle reset email
            // --- End Placeholder --- 

            showToast('Request Sent', 'If an account exists for that email, password reset instructions have been sent.', 'success'); // Use generic message for security
            showPage('login');
        }

        function demoLogin(type) {
            const demoUser = {
                firstName: type === 'employer' ? 'Demo Employer' : 'Demo Job Seeker',
                lastName: 'User',
                email: `${type}@demo.com`,
                type: type,
                // Add other fields expected by the app if necessary
                phone: 'N/A',
                location: 'Demo Location',
                createdAt: new Date().toISOString()
            };

            currentUser = demoUser;
            userType = type;
            // Don't save demo user to persistent localStorage to avoid conflicts
            // localStorage.setItem('currentUser', JSON.stringify(currentUser)); 

            document.getElementById('userProfileName').textContent = demoUser.firstName;
            document.getElementById('authButtons').style.display = 'none';
            document.getElementById('userProfile').style.display = 'block';

            initializeRoleBasedUI();
            showToast('Demo Login', `Logged in as ${demoUser.firstName}`, 'info');

            // Update UI based on demo login
            updateAllJobCardButtons();
            updateSavedJobsUI(); // Will show empty state as demo user has no saved jobs
            handleApplicationTabs(); // Will show empty state

            if (type === 'employer') {
                showPage('employer-dashboard');
            } else {
                showPage('home');
            }
        }

        // --- Job Data (Example - In real app, fetch from API) ---
        const jobsData = {
            // Using the IDs from the original HTML for consistency
            'senior-software-engineer': {
                id: 'senior-software-engineer',
                title: 'Senior Software Engineer',
                company: 'Tech Mahindra',
                type: 'Full-time',
                location: 'Bangalore, India',
                salary: '₹15-20 LPA',
                description: 'Looking for experienced software engineers with expertise in Java, Spring Boot, and Microservices.',
                requirements: [
                    '5+ years of experience in Java development',
                    'Strong knowledge of Spring Boot and Microservices',
                    'Experience with RESTful APIs and database design',
                    'Bachelor\'s degree in Computer Science or related field'
                ],
                benefits: [
                    'Competitive salary and benefits',
                    'Health insurance and wellness programs',
                    'Flexible work hours',
                    'Professional development opportunities'
                ]
            },
            'data-scientist': {
                id: 'data-scientist',
                title: 'Data Scientist',
                company: 'Tata Consultancy Services',
                type: 'Remote',
                location: 'Mumbai, India',
                salary: '₹12-18 LPA',
                description: 'Seeking data scientists with experience in Python, Machine Learning, and Big Data technologies.',
                 requirements: [
                    '3+ years of experience in data science',
                    'Strong programming skills in Python',
                    'Experience with ML frameworks and big data tools',
                    'Master\'s degree in Data Science or related field'
                ],
                benefits: [
                    'Remote work flexibility',
                    'Comprehensive health coverage',
                    'Learning and development programs',
                    'Performance bonuses'
                ]
            },
            'ui-ux-designer': {
                 id: 'ui-ux-designer',
                 title: 'UI/UX Designer',
                 company: 'Infosys',
                 type: 'Part-time',
                 location: 'Hyderabad, India',
                 salary: '₹8-12 LPA',
                 description: 'Looking for creative UI/UX designers with experience in Figma and Adobe XD.',
                 requirements: [
                    '2+ years of UI/UX design experience',
                    'Proficiency in Figma and Adobe XD',
                    'Strong portfolio of design projects',
                    'Bachelor\'s degree in Design or related field'
                ],
                benefits: [
                    'Flexible part-time schedule',
                    'Creative work environment',
                    'Design tools and resources',
                    'Career growth opportunities'
                ]
            },
            // Add more jobs if needed, using unique IDs
             'frontend-dev': {
                 id: 'frontend-dev',
                 title: 'Frontend Developer',
                 company: 'Wipro',
                 type: 'Remote',
                 location: 'Pune, India',
                 salary: '₹10-15 LPA',
                 description: 'Frontend developer with React.js expertise needed.',
                 requirements: [
                    'React.js experience',
                    'HTML/CSS expertise',
                    'JavaScript proficiency'
                 ],
                 benefits: [] // Add benefits if known
             }
        };
        // Convert jobsData object to an array for easier filtering/iteration
        const allJobsArray = Object.values(jobsData);


        // --- Job Browsing & Filtering ---
        function filterJobs(type) {
             // This function seems to filter the initial 'Featured Jobs' section, not the 'Browse Jobs' page.
             // Let's keep its original behavior for now.
            const featuredJobListings = document.getElementById('jobListings'); // Target the featured section
            if(!featuredJobListings) return;

            const jobCards = featuredJobListings.querySelectorAll('.job-card');
            let foundJob = false;
            jobCards.forEach(card => {
                // Find the job type badge text content
                const jobTypeBadge = card.querySelector('.job-type');
                const jobType = jobTypeBadge ? jobTypeBadge.textContent.toLowerCase() : '';
                
                const parentCol = card.closest('.col-md-4'); // Assuming this structure
                if (parentCol) {
                    if (type === 'all' || jobType === type.toLowerCase()) {
                        parentCol.style.display = 'block';
                        foundJob = true;
                    } else {
                        parentCol.style.display = 'none';
                    }
                }
            });
            // Add a message if no jobs match the filter in the featured section?
        }

        // Function to display jobs in the 'Browse Jobs' (job-categories) page
        function showJobCategory(category) {
            const container = document.getElementById('categoryJobListings');
            if (!container) return;
            container.innerHTML = ''; // Clear previous results
            
            let filteredJobs = allJobsArray.filter(job => {
                if (category === 'all') return true;
                // Ensure type exists and perform case-insensitive comparison
                return job.type && typeof job.type === 'string' && job.type.toLowerCase().includes(category.toLowerCase());
            });

            if (filteredJobs.length === 0) {
                container.innerHTML = `
                    <div class="col-12">
                        <div class="alert alert-info">No jobs found matching '${category}'.</div>
                    </div>`;
            } else {
                filteredJobs.forEach(job => {
                    // Generate HTML for each job card
                    const cardHtml = `
                        <div class="col-md-4 mb-4">
                            <div class="card h-100 job-card" data-job-id="${job.id}">
                                <div class="card-body d-flex flex-column">
                                    <div class="d-flex justify-content-between align-items-start mb-3">
                                        <div>
                                            <h5 class="card-title">${job.title}</h5>
                                            <h6 class="card-subtitle mb-2 text-muted">${job.company}</h6>
                                        </div>
                                        <span class="badge bg-primary job-type">${job.type}</span>
                                    </div>
                                    <p class="card-text flex-grow-1">${job.description}</p> <!-- Use flex-grow-1 for consistent height -->
                                    <div class="d-flex justify-content-between align-items-center mb-3">
                                        <span><i class="fas fa-map-marker-alt me-1"></i> ${job.location}</span>
                                        <span><i class="fas fa-rupee-sign me-1"></i> ${job.salary || 'N/A'}</span>
                                    </div>
                                    <div class="mt-auto"> <!-- Push buttons to bottom -->
                                        <button class="btn btn-sm btn-primary me-2" onclick="viewJobDetails('${job.id}')">View Details</button>
                                        <button class="btn btn-sm btn-success apply-btn me-2" onclick="applyForJob('${job.id}')">
                                            <i class="fas fa-paper-plane me-1"></i> Apply Now
                                        </button>
                                        <button class="btn btn-sm btn-outline-primary save-btn" onclick="saveJob('${job.id}')">
                                            <i class="far fa-bookmark me-1"></i> Save Job
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    `;
                    container.insertAdjacentHTML('beforeend', cardHtml);
                    // Update button states for the newly added card
                    updateJobCardButtons(job.id);
                });
            }

            // Navigate to the 'Browse Jobs' page
            showPage('job-categories');
        }

        // --- Job Actions: Save, Apply, View Details ---

        // Updates button states (Apply/Save) for a specific job ID across the UI
        function updateJobCardButtons(jobId) {
            const isApplied = currentUser ? getLocalStorage(`applications_${currentUser.email}`, []).some(app => app.jobId === jobId) : false;
            const isSaved = currentUser ? getLocalStorage(`savedJobs_${currentUser.email}`, []).some(saved => saved.jobId === jobId) : false;

            // Select all potential cards/modals where this job might appear
            document.querySelectorAll(`[data-job-id="${jobId}"]`).forEach(cardElement => {
                const applyBtn = cardElement.querySelector('.apply-btn');
                const saveBtn = cardElement.querySelector('.save-btn');

                if (applyBtn) {
                    if (!currentUser) {
                        applyBtn.disabled = true;
                        applyBtn.innerHTML = '<i class="fas fa-paper-plane me-1"></i> Apply Now';
                        applyBtn.classList.remove('btn-success');
                        applyBtn.classList.add('btn-primary'); // Or btn-success? Check design
                    } else if (isApplied) {
                        applyBtn.disabled = true;
                        applyBtn.innerHTML = '<i class="fas fa-check me-1"></i> Applied';
                        applyBtn.classList.remove('btn-primary');
                        applyBtn.classList.add('btn-success');
                    } else {
                        applyBtn.disabled = false;
                        applyBtn.innerHTML = '<i class="fas fa-paper-plane me-1"></i> Apply Now';
                        applyBtn.classList.remove('btn-success');
                        applyBtn.classList.add('btn-primary'); // Or btn-success?
                    }
                }

                if (saveBtn) {
                    if (!currentUser) {
                        saveBtn.disabled = true;
                        saveBtn.innerHTML = '<i class="far fa-bookmark me-1"></i> Save Job';
                        saveBtn.classList.remove('btn-primary');
                        saveBtn.classList.add('btn-outline-primary');
                    } else if (isSaved) {
                        saveBtn.innerHTML = '<i class="fas fa-bookmark me-1"></i> Saved';
                        saveBtn.classList.remove('btn-outline-primary');
                        saveBtn.classList.add('btn-primary');
                        // saveBtn.disabled = true; // Optional: disable after saving
                    } else {
                        saveBtn.disabled = false;
                        saveBtn.innerHTML = '<i class="far fa-bookmark me-1"></i> Save Job';
                        saveBtn.classList.remove('btn-primary');
                        saveBtn.classList.add('btn-outline-primary');
                    }
                }
            });
            
            // Specifically update buttons in the Job Details Modal if it's open and matches the jobId
            const jobDetailsModalElement = document.getElementById('jobDetailsModal');
            if (jobDetailsModalElement.classList.contains('show') && jobDetailsModalElement.dataset.jobId === jobId) {
                 const modalApplyBtn = jobDetailsModalElement.querySelector('#applyJobBtn');
                 const modalSaveBtn = jobDetailsModalElement.querySelector('#saveJobBtn');
                 
                 if(modalApplyBtn) {
                    if (!currentUser) {
                        modalApplyBtn.disabled = true;
                        modalApplyBtn.innerHTML = '<i class="fas fa-paper-plane me-1"></i> Apply Now';
                        modalApplyBtn.classList.remove('btn-success');
                        modalApplyBtn.classList.add('btn-primary'); // Or success?
                    } else if (isApplied) {
                        modalApplyBtn.disabled = true;
                        modalApplyBtn.innerHTML = '<i class="fas fa-check me-1"></i> Applied';
                         modalApplyBtn.classList.remove('btn-primary');
                        modalApplyBtn.classList.add('btn-success');
                    } else {
                        modalApplyBtn.disabled = false;
                        modalApplyBtn.innerHTML = '<i class="fas fa-paper-plane me-1"></i> Apply Now';
                         modalApplyBtn.classList.remove('btn-success');
                        modalApplyBtn.classList.add('btn-primary'); // Or success?
                    }
                 }
                 if(modalSaveBtn) {
                     if (!currentUser) {
                         modalSaveBtn.disabled = true;
                         modalSaveBtn.innerHTML = '<i class="far fa-bookmark me-1"></i> Save Job';
                         modalSaveBtn.classList.remove('btn-primary');
                         modalSaveBtn.classList.add('btn-outline-primary');
                     } else if (isSaved) {
                         modalSaveBtn.innerHTML = '<i class="fas fa-bookmark me-1"></i> Saved';
                         modalSaveBtn.classList.remove('btn-outline-primary');
                         modalSaveBtn.classList.add('btn-primary');
                         // modalSaveBtn.disabled = true; 
                     } else {
                         modalSaveBtn.disabled = false;
                         modalSaveBtn.innerHTML = '<i class="far fa-bookmark me-1"></i> Save Job';
                         modalSaveBtn.classList.remove('btn-primary');
                         modalSaveBtn.classList.add('btn-outline-primary');
                     }
                 }
            }
        }

        // Helper to update all visible job card buttons (e.g., on login/logout)
        function updateAllJobCardButtons() {
            document.querySelectorAll('.job-card[data-job-id]').forEach(card => {
                const jobId = card.dataset.jobId;
                if (jobId) {
                    updateJobCardButtons(jobId);
                }
            });
        }

        // Save Job Action
        function saveJob(jobId) {
            if (!currentUser) {
                showToast('Login Required', 'Please log in to save jobs.', 'info');
                showPage('login');
                return;
            }
            
            const job = allJobsArray.find(j => j.id === jobId); // Use the array
            if (!job) {
                showToast('Error', 'Job not found.', 'error');
                return;
            }

            const storageKey = `savedJobs_${currentUser.email}`;
            let savedJobs = getLocalStorage(storageKey, []);
            
            // Check if already saved
            if (savedJobs.some(saved => saved.jobId === jobId)) {
                showToast('Already Saved', 'This job is already in your saved list.', 'info');
                // Decide if clicking again should unsave
                // removeSavedJob(jobId); 
                return; 
            }

            // Structure of saved job data
            const savedJobData = {
                jobId: job.id,
                jobTitle: job.title,
                company: job.company,
                type: job.type,
                location: job.location,
                salary: job.salary,
                description: job.description.substring(0, 150) + (job.description.length > 150 ? '...' : ''), // Truncate description for storage
                savedDate: new Date().toISOString()
            };

            savedJobs.push(savedJobData);
            try {
                 localStorage.setItem(storageKey, JSON.stringify(savedJobs));
            } catch(e) {
                 console.error("Error saving job to localStorage:", e);
                 showToast('Storage Error', 'Could not save job. Storage might be full.', 'error');
                 return;
            }
            
            // Update UI immediately for this specific job
            updateJobCardButtons(jobId);
            
            // Show success toast
            showToast('Job Saved', `'${job.title}' added to saved jobs.`);
            
            // Navigate and update the Saved Jobs page
            showPage('saved-jobs'); // showPage now handles calling updateSavedJobsUI
            
            // Scroll after a short delay to ensure the page is rendered
            setTimeout(() => {
                 const savedJobsSection = document.getElementById('saved-jobs-page');
                 if (savedJobsSection) {
                     // Scroll the page itself to the top, or the container
                     window.scrollTo({ top: savedJobsSection.offsetTop - 70, behavior: 'smooth' }); // Adjust offset for fixed header
                 }
            }, 100); 
        }

        // Apply for Job Action (Opens Modal)
        function applyForJob(jobId) {
            if (!currentUser) {
                showToast('Login Required', 'Please log in to apply for jobs.', 'info');
                showPage('login');
                return;
            }

            const job = allJobsArray.find(j => j.id === jobId); // Use the array
            if (!job) {
                showToast('Error', 'Job not found.', 'error');
                return;
            }

            // Check if already applied
            const applications = getLocalStorage(`applications_${currentUser.email}`, []);
            if (applications.some(app => app.jobId === jobId)) {
                showToast('Already Applied', 'You have already applied for this job.', 'info');
                // Optionally navigate to applications page
                // showPage('my-applications');
                return;
            }

            // --- Pre-fill and Show Application Modal ---
            const applicationModalElement = document.getElementById('applicationModal');
            const applicationForm = document.getElementById('jobApplicationForm');
            if (!applicationModalElement || !applicationForm) return;

            // Set job title in modal header
            document.getElementById('applicationJobTitle').textContent = job.title;
            // Store job id in the form's dataset for submission handler
            applicationForm.dataset.jobId = jobId; 
            
            // Reset form to clear previous entries/state
            applicationForm.reset(); 

            // Pre-fill user info from currentUser object
            document.getElementById('applicantFirstName').value = currentUser.firstName || '';
            document.getElementById('applicantLastName').value = currentUser.lastName || '';
            document.getElementById('applicantEmail').value = currentUser.email || '';
            document.getElementById('applicantPhone').value = currentUser.phone || '';
            document.getElementById('applicantLocation').value = currentUser.location || '';
            // Clear file inputs (important for re-opening)
            document.getElementById('resumeUpload').value = null;
            document.getElementById('coverLetterUpload').value = null;

            // Show the modal using Bootstrap's JS API
            const applicationModal = bootstrap.Modal.getOrCreateInstance(applicationModalElement);
            applicationModal.show();
        }

        // Handle Application Form Submission (from Modal)
        function handleJobApplication(event) {
            event.preventDefault();
            
            if (!currentUser) {
                showToast('Error', 'You must be logged in to apply.', 'error');
                return;
            }
            
            const form = event.target;
            const jobId = form.dataset.jobId; // Retrieve job id
            const job = allJobsArray.find(j => j.id === jobId); // Use the array

            if (!job) {
                showToast('Error', 'Job details missing. Cannot submit application.', 'error');
                return;
            }

            // Use HTML5 validation
            if (!form.checkValidity()) {
                showToast('Validation Error', 'Please fill all required fields correctly.', 'error');
                form.reportValidity(); // Browser shows specific errors
                return;
            }

            const formData = new FormData(form);

            // --- Simulate storing application data --- 
            // In a real app, you'd likely send formData to a backend API
            const applicationData = {
                jobId: job.id,
                jobTitle: job.title,
                company: job.company,
                // Store other relevant job details if needed
                applicantName: `${formData.get('applicantFirstName')} ${formData.get('applicantLastName')}`,
                email: formData.get('applicantEmail'), // Redundant if linked to currentUser, but good for record
                phone: formData.get('applicantPhone'),
                // Note: Files aren't stored in localStorage. Just record submission.
                resumeSubmitted: formData.get('resumeUpload')?.name ? true : false,
                coverLetterSubmitted: formData.get('coverLetterUpload')?.name ? true : false,
                coverLetterText: formData.get('coverLetterText'), // Store cover letter text
                availability: formData.get('availability'),
                salaryExpectations: formData.get('salaryExpectations'),
                appliedDate: new Date().toISOString(),
                status: 'pending', // Initial status
                lastUpdate: new Date().toISOString()
            };

            const storageKey = `applications_${currentUser.email}`;
            let applications = getLocalStorage(storageKey, []);
            
            // Prevent double application (should be caught by applyForJob, but good backup)
             if (applications.some(app => app.jobId === jobId)) {
                 showToast('Already Applied', 'Application already submitted.', 'info');
                 return;
             }

            applications.push(applicationData);
             try {
                localStorage.setItem(storageKey, JSON.stringify(applications));
            } catch (e) {
                 console.error("Error saving application to localStorage:", e);
                 showToast('Storage Error', 'Could not save application. Storage might be full.', 'error');
                 return;
            }

            // --- Post-Submission Actions ---
            // Close the modal
            const applicationModal = bootstrap.Modal.getInstance(document.getElementById('applicationModal'));
            if (applicationModal) {
                applicationModal.hide();
            }

            // Update UI button state for this job
            updateJobCardButtons(job.id);
            
            // Show success feedback
            showToast('Application Submitted', `Your application for '${job.title}' was sent.`);
            
            // Navigate to the Applications page
            showPage('my-applications'); // showPage calls handleApplicationTabs

            // Scroll to the applications section after delay
            setTimeout(() => {
                const applicationsSection = document.getElementById('my-applications-page');
                if (applicationsSection) {
                     window.scrollTo({ top: applicationsSection.offsetTop - 70, behavior: 'smooth' }); // Adjust offset
                }
            }, 100);
        }

        // View Job Details Action (Opens Modal)
        function viewJobDetails(jobId) {
            const job = allJobsArray.find(j => j.id === jobId); // Use the array
            if (!job) {
                showToast('Error', 'Could not find job details.', 'error');
                return;
            }

            const jobDetailsModalElement = document.getElementById('jobDetailsModal');
            if(!jobDetailsModalElement) return;

            // --- Populate Modal Content ---
            jobDetailsModalElement.querySelector('#modalJobTitle').textContent = job.title;
            jobDetailsModalElement.querySelector('#modalJobCompany').textContent = job.company;
            jobDetailsModalElement.querySelector('#modalJobType').textContent = job.type;
            jobDetailsModalElement.querySelector('#modalJobLocation').textContent = job.location;
            jobDetailsModalElement.querySelector('#modalJobSalary').textContent = job.salary || 'N/A';
            // Placeholder dates - fetch or calculate if needed
            jobDetailsModalElement.querySelector('#modalJobPosted').textContent = 'N/A'; 
            jobDetailsModalElement.querySelector('#modalJobDeadline').textContent = 'N/A';
            
            jobDetailsModalElement.querySelector('#modalJobDescription').innerHTML = `<p>${job.description || 'Not provided'}</p>`;
            jobDetailsModalElement.querySelector('#modalJobRequirements').innerHTML = job.requirements && job.requirements.length > 0
                ? `<ul>${job.requirements.map(req => `<li>${req}</li>`).join('')}</ul>`
                : '<p>Not specified</p>';
            jobDetailsModalElement.querySelector('#modalJobBenefits').innerHTML = job.benefits && job.benefits.length > 0
                ? `<ul>${job.benefits.map(ben => `<li>${ben}</li>`).join('')}</ul>` 
                : '<p>Not specified</p>';

            // Store job ID in modal's dataset for button actions
            jobDetailsModalElement.dataset.jobId = jobId; 

            // --- Update Modal Buttons State ---
            updateJobCardButtons(jobId); // This function now handles modal buttons too

            // --- Ensure Modal Button Listeners are Correct ---
            // It's often better to add listeners once and use the jobId from the modal's dataset
            // rather than re-adding them here. Check if DOMContentLoaded already handles this.
            // If not, ensure listeners target the *current* jobId.
             const modalApplyBtn = jobDetailsModalElement.querySelector('#applyJobBtn');
             const modalSaveBtn = jobDetailsModalElement.querySelector('#saveJobBtn');
             
             // Simple approach: Re-attach listeners using the current jobId
             modalApplyBtn.replaceWith(modalApplyBtn.cloneNode(true)); // Remove old listeners
             modalSaveBtn.replaceWith(modalSaveBtn.cloneNode(true));
             
             document.getElementById('applyJobBtn').addEventListener('click', () => applyForJob(jobId));
             document.getElementById('saveJobBtn').addEventListener('click', () => saveJob(jobId));

            // --- Show the Modal ---
            const jobDetailsModal = bootstrap.Modal.getOrCreateInstance(jobDetailsModalElement);
            jobDetailsModal.show();
        }

        // --- Saved Jobs Page UI ---
        function updateSavedJobsUI() {
            const container = document.getElementById('savedJobsContainer');
            if (!container) return; // Exit if container not found

            // Handle logged-out state
            if (!currentUser) {
                container.innerHTML = `
                    <div class="col-12">
                        <div class="alert alert-warning">
                            <i class="fas fa-exclamation-circle me-2"></i>
                            Please <a href="#" onclick="event.preventDefault(); showPage('login');">log in</a> to view your saved jobs.
                        </div>
                    </div>`;
                return;
            }

            const storageKey = `savedJobs_${currentUser.email}`;
            const savedJobs = getLocalStorage(storageKey, []);

            // Handle empty state
            if (savedJobs.length === 0) {
                container.innerHTML = `
                    <div class="col-12">
                        <div class="alert alert-info">
                            <i class="fas fa-info-circle me-2"></i>
                            You haven't saved any jobs yet.
                        </div>
                    </div>`;
                return;
            }

            // Populate with saved jobs
            container.innerHTML = ''; // Clear previous content
            savedJobs.forEach(job => {
                // Use job data stored in localStorage
                const descriptionText = job.description || 'No description available.'; 
                const cardHtml = `
                    <div class="col-md-4 mb-4">
                        <div class="card h-100 job-card" data-job-id="${job.jobId}"> 
                            <div class="card-body d-flex flex-column">
                                <div class="d-flex justify-content-between align-items-start mb-3">
                                    <div>
                                        <h5 class="card-title">${job.jobTitle}</h5>
                                        <h6 class="card-subtitle mb-2 text-muted">${job.company}</h6>
                                    </div>
                                    <button class="btn btn-sm btn-outline-danger" onclick="removeSavedJob('${job.jobId}')" title="Remove saved job">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                                <p class="card-text flex-grow-1">${descriptionText}</p>
                                <div class="d-flex justify-content-between align-items-center mb-3">
                                    <span><i class="fas fa-map-marker-alt me-1"></i> ${job.location}</span>
                                    <span><i class="fas fa-rupee-sign me-1"></i> ${job.salary || 'N/A'}</span>
                                </div>
                                <div class="d-flex justify-content-between align-items-center">
                                    <span class="badge bg-primary">${job.type}</span>
                                    <small class="text-muted">Saved on ${new Date(job.savedDate).toLocaleDateString()}</small>
                                </div>
                                <div class="mt-auto"> <!-- Push buttons to bottom -->
                                    <button class="btn btn-sm btn-primary me-2" onclick="viewJobDetails('${job.jobId}')">View Details</button>
                                    <button class="btn btn-sm btn-success apply-btn" onclick="applyForJob('${job.jobId}')">
                                        <i class="fas fa-paper-plane me-1"></i> Apply Now
                                    </button>
                                    <!-- No 'Save' button needed here, maybe 'Remove' -->
                                </div>
                            </div>
                        </div>
                    </div>
                `;
                container.insertAdjacentHTML('beforeend', cardHtml);
                // Update the apply button state specifically for this card
                updateJobCardButtons(job.jobId); 
            });
        }

        // Function to remove a saved job
        function removeSavedJob(jobId) {
            if (!currentUser) return; // Should be logged in to see this button

            const storageKey = `savedJobs_${currentUser.email}`;
            let savedJobs = getLocalStorage(storageKey, []);
            const initialLength = savedJobs.length;
            savedJobs = savedJobs.filter(job => job.jobId !== jobId);

            if (savedJobs.length < initialLength) {
                 try {
                    localStorage.setItem(storageKey, JSON.stringify(savedJobs));
                } catch (e) {
                    console.error("Error removing job from localStorage:", e);
                    showToast('Storage Error', 'Could not remove job.', 'error');
                    return;
                }
                showToast('Job Removed', 'Job removed from your saved list.');
                
                // Refresh the saved jobs UI if currently visible
                if (document.getElementById('saved-jobs-page').classList.contains('active')) {
                    updateSavedJobsUI();
                }
                // Also update the button state on any other visible cards for this job
                updateJobCardButtons(jobId); 
            } else {
                showToast('Error', 'Could not find job to remove.', 'error');
            }
        }

        // --- My Applications Page UI & Logic ---
        function handleApplicationTabs() {
            const applicationsTableBody = document.querySelector('#applicationsTable tbody');
            if (!applicationsTableBody) return; // Exit if table not found

            const tabsContainer = document.querySelector('#my-applications-page .nav-tabs');
            if (!tabsContainer) return; // Exit if tabs container not found

            // Function to render the table based on filter
            function renderApplicationsTable(statusFilter = 'all') {
                if (!currentUser) {
                    applicationsTableBody.innerHTML = `
                        <tr>
                            <td colspan="6" class="text-center">
                                Please <a href="#" onclick="event.preventDefault(); showPage('login');">log in</a> to view your applications.
                            </td>
                        </tr>`;
                    return;
                }
                
                const storageKey = `applications_${currentUser.email}`;
                const applications = getLocalStorage(storageKey, []);
                applicationsTableBody.innerHTML = ''; // Clear table body
                
                const filteredApplications = statusFilter === 'all' 
                    ? applications 
                    : applications.filter(app => (app.status || 'pending') === statusFilter); // Default to 'pending' if status missing

                if (filteredApplications.length === 0) {
                    applicationsTableBody.innerHTML = `
                        <tr>
                            <td colspan="6" class="text-center">No applications found${statusFilter !== 'all' ? ' with status: ' + statusFilter : ''}.</td>
                        </tr>`;
                    return;
                }

                // Sort by date applied, newest first
                filteredApplications.sort((a, b) => new Date(b.appliedDate) - new Date(a.appliedDate));

                filteredApplications.forEach(app => {
                    const status = app.status || 'pending'; 
                    const statusBadgeMap = {
                        'active': 'bg-info', 'hired': 'bg-success', 'rejected': 'bg-danger',
                        'pending': 'bg-warning', 'reviewed': 'bg-primary', 'interview': 'bg-secondary'
                    };
                    const statusBadgeClass = statusBadgeMap[status] || 'bg-secondary'; // Default badge
                    const displayStatus = status.charAt(0).toUpperCase() + status.slice(1);
                    const appliedDateStr = new Date(app.appliedDate).toLocaleDateString();
                    const lastUpdateStr = new Date(app.lastUpdate || app.appliedDate).toLocaleDateString();

                    const rowHtml = `
                        <tr>
                            <td>${app.jobTitle}</td>
                            <td>${app.company}</td>
                            <td><span class="badge ${statusBadgeClass}">${displayStatus}</span></td>
                            <td>${appliedDateStr}</td>
                            <td>${lastUpdateStr}</td>
                            <td>
                                <button class="btn btn-sm btn-outline-primary" onclick="viewApplicationDetails('${app.jobId}')" title="View job details">
                                    <i class="fas fa-eye"></i> View
                                </button>
                                <!-- Add Withdraw/Other actions here if needed -->
                            </td>
                        </tr>`;
                     applicationsTableBody.insertAdjacentHTML('beforeend', rowHtml);
                });
            }

            // Event delegation for tab clicks
            tabsContainer.addEventListener('click', (e) => {
                if (e.target.classList.contains('nav-link')) {
                    e.preventDefault();
                    const statusFilter = e.target.id.replace('ApplicationsTab', '').toLowerCase(); // e.g., 'all', 'active'
                    
                    // Update active tab visually
                    tabsContainer.querySelectorAll('.nav-link').forEach(tab => tab.classList.remove('active'));
                    e.target.classList.add('active');
                    
                    // Render table with the new filter
                    renderApplicationsTable(statusFilter);
                }
            });

            // Initial load: Find the active tab or default to 'all'
            const activeNav = tabsContainer.querySelector('.nav-link.active');
            let initialStatus = 'all';
            if (activeNav) {
                initialStatus = activeNav.id.replace('ApplicationsTab', '').toLowerCase();
            }
            renderApplicationsTable(initialStatus); // Initial render
        }

        // Function called when 'View' button is clicked in Applications table
        function viewApplicationDetails(jobId) {
             // Currently, just opens the standard job details modal
             // Could be enhanced to show application-specific info
             viewJobDetails(jobId); 
        }

        // --- Other UI Functions (e.g., Course Filtering, Modals) ---
        function filterCourses(type) {
            // Assuming '.course-card' exists within '#courseListings'
            const courseListings = document.getElementById('courseListings');
            if(!courseListings) return;
            const courseCards = courseListings.querySelectorAll('.course-card');
            courseCards.forEach(card => {
                const courseTypeBadge = card.querySelector('.badge'); // Assuming one badge indicates type
                const courseType = courseTypeBadge ? courseTypeBadge.textContent.toLowerCase() : '';
                const parentCol = card.closest('.col-md-4');
                if(parentCol) {
                    if (type === 'all' || courseType.includes(type.toLowerCase())) {
                        parentCol.style.display = 'block';
                    } else {
                        parentCol.style.display = 'none';
                    }
                }
            });
        }
        
        // Basic Success/Error Modal Wrappers (can be replaced by toasts)
        function showSuccessModal(message) {
             // Using toast instead
             showToast('Success', message, 'success');
            /*
            const modal = document.getElementById('successModal');
            if(modal) {
                modal.querySelector('#successModalMessage').textContent = message;
                const bsModal = bootstrap.Modal.getOrCreateInstance(modal);
                bsModal.show();
            }
            */
        }

        function showErrorModal(message) {
             // Using toast instead
             showToast('Error', message, 'error');
            /*
            const modal = document.getElementById('errorModal');
            if(modal) {
                modal.querySelector('#errorModalMessage').textContent = message;
                const bsModal = bootstrap.Modal.getOrCreateInstance(modal);
                bsModal.show();
            }
            */
        }

        // --- DOMContentLoaded: Initialization and Event Listeners ---
        document.addEventListener('DOMContentLoaded', function() {
            
            // 1. Check for stored user session
            const storedUser = localStorage.getItem('currentUser'); 
            if (storedUser) {
                try {
                    currentUser = JSON.parse(storedUser);
                    userType = currentUser.type;
                } catch (e) {
                    console.error("Error parsing stored user session:", e);
                    localStorage.removeItem('currentUser'); // Clear invalid session data
                }
            }

            // 2. Initialize UI based on login state
            if (currentUser) {
                document.getElementById('userProfileName').textContent = currentUser.firstName;
                document.getElementById('authButtons').style.display = 'none';
                document.getElementById('userProfile').style.display = 'block';
            } else {
                document.getElementById('authButtons').style.display = 'flex';
                document.getElementById('userProfile').style.display = 'none';
            }
            initializeRoleBasedUI(); // Set up role-specific elements

            // 3. Initial content population
            showJobCategory('all');    // Populate the 'Browse Jobs' section initially
            updateSavedJobsUI();       // Populate 'Saved Jobs' section
            handleApplicationTabs();   // Populate 'My Applications' section/table
            // Note: updateAllJobCardButtons is implicitly called by showJobCategory

            // 4. Add Global Event Listeners
            // Login Form
            const loginForm = document.getElementById('loginForm');
            if (loginForm) loginForm.addEventListener('submit', handleLogin);
            document.getElementById("loginForm").addEventListener("submit", async function(e) {
    e.preventDefault();
    
    const form = this;
    const submitBtn = form.querySelector('button[type="submit"]');
    const originalBtnText = submitBtn.innerHTML;
    
    try {
        // Show loading state
        submitBtn.disabled = true;
        submitBtn.innerHTML = '<span class="spinner-border spinner-border-sm"></span> Signing in...';
        
        const response = await fetch('login.php', {
            method: 'POST',
            body: new FormData(form)
        });
        
        const data = await response.json();
        
        if (data.success) {
            // Force a full page reload to initialize session properly
            window.location.href = 'jobs.php'; // Or your jobs page
        } else {
            showToast('Login Failed', data.message || 'Invalid credentials');
        }
    } catch (error) {
        console.error('Login error:', error);
        showToast('Error', 'Login failed. Please try again.');
    } finally {
        submitBtn.disabled = false;
        submitBtn.innerHTML = originalBtnText;
    }
});
            // Registration Form
            const registerForm = document.getElementById('registerForm');
            if (registerForm) registerForm.addEventListener('submit', handleRegister);
            
            // Forgot Password Form
            const forgotPasswordForm = document.getElementById('forgotPasswordForm');
            if (forgotPasswordForm) forgotPasswordForm.addEventListener('submit', handleForgotPassword);
            
            // Job Application Modal Form
            const jobApplicationForm = document.getElementById('jobApplicationForm');
            if (jobApplicationForm) jobApplicationForm.addEventListener('submit', handleJobApplication);

            // Logout Link (using event delegation on the dropdown menu might be more robust)
            const logoutLink = document.querySelector('#userProfile .dropdown-menu a[onclick*="handleLogout()"]');
            if (logoutLink) {
                logoutLink.addEventListener('click', function(e) {
                    // Check if it's the actual logout link
                    if(e.target.textContent.includes('Logout')) {
                        e.preventDefault(); 
                        handleLogout();
                    }
                });
                // Keep the onclick for now as a fallback, or remove it if delegation is preferred.
                // logoutLink.removeAttribute('onclick'); 
            }

            // Dark Mode Toggle
            const darkModeToggle = document.querySelector('.dark-mode-toggle');
            if (darkModeToggle) {
                darkModeToggle.addEventListener('click', () => {
                    document.body.classList.toggle('dark-mode');
                    // Update icon and potentially save preference in localStorage
                    const icon = darkModeToggle.querySelector('i');
                    if (document.body.classList.contains('dark-mode')) {
                        icon.classList.remove('fa-moon');
                        icon.classList.add('fa-sun');
                        // localStorage.setItem('theme', 'dark');
                    } else {
                        icon.classList.remove('fa-sun');
                        icon.classList.add('fa-moon');
                        // localStorage.setItem('theme', 'light');
                    }
                });
                // Optionally load theme preference on start
                // if (localStorage.getItem('theme') === 'dark') { darkModeToggle.click(); }
            }
            
            // Add listeners for Job Search form if needed
            const jobSearchForm = document.getElementById('jobSearchForm');
            if (jobSearchForm) {
                jobSearchForm.addEventListener('submit', (e) => {
                    e.preventDefault();
                    const keywords = document.getElementById('jobSearchInput').value;
                    const location = document.getElementById('locationInput').value;
                    console.log(`Search triggered: Keywords='${keywords}', Location='${location}'`);
                    // Implement actual search logic here - likely filtering allJobsArray
                    // and calling a function similar to showJobCategory to display results.
                    showToast('Search', 'Search functionality not fully implemented yet.', 'info');
                });
            }

            // Initial Page Display (Show Home)
            showPage('home');

        }); 
        document.getElementById('registerForm')?.addEventListener('submit', function(e) {
    e.preventDefault();
    
    const formData = new FormData(this);
    
    // Client-side validation
    if (formData.get('password') !== formData.get('confirmPassword')) {
        showToast('Error', 'Passwords do not match', 'error');
        return;
    }

    // Show loading state
    const submitBtn = this.querySelector('button[type="submit"]');
    submitBtn.disabled = true;
    submitBtn.innerHTML = '<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span> Registering...';

    fetch('register.php', {
        method: 'POST',
        body: formData
    })
    .then(response => {
        submitBtn.disabled = false;
        submitBtn.innerHTML = '<i class="fas fa-user-plus me-1"></i> Create Account';
        
        if (!response.ok) throw new Error('Registration failed');
        return response.json();
    })
    .then(data => {
        if (data.success) {
            showToast('Success', 'Registration successful!', 'success');
            // Auto-login the user
            currentUser = {
                firstName: formData.get('firstName'),
                email: formData.get('email'),
                type: formData.get('accountType')
            };
            userType = formData.get('accountType');
            
            // Update UI
            document.getElementById('userProfileName').textContent = formData.get('firstName');
            document.getElementById('authButtons').style.display = 'none';
            document.getElementById('userProfile').style.display = 'block';
            
            // Initialize role-based UI
            initializeRoleBasedUI();
            
            // Redirect to appropriate page
            showPage(formData.get('accountType') === 'employer' ? 'employer-dashboard' : 'home');
        } else {
            showToast('Error', data.message || 'Registration failed', 'error');
        }
    })
    .catch(error => {
        console.error('Registration error:', error);
        showToast('Error', 'Registration failed. Please try again.', 'error');
    });
});
</script>
</body>
</html>
